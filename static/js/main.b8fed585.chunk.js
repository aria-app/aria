(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1050:function(e,t,n){},1051:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"NAME",function(){return P}),n.d(o,"octaveRange",function(){return q});var a={};n.r(a),n.d(a,"previewPitch",function(){return B});var r={};n.r(r),n.d(r,"BPM_SET",function(){return z}),n.d(r,"DASHBOARD_LOADED",function(){return K}),n.d(r,"INITIALIZED",function(){return Q}),n.d(r,"MEASURE_COUNT_SET",function(){return V}),n.d(r,"NOTE_DRAWN",function(){return W}),n.d(r,"NOTE_ERASED",function(){return H}),n.d(r,"NOTES_DRAGGED",function(){return Y}),n.d(r,"NOTES_DUPLICATED",function(){return F}),n.d(r,"NOTES_MOVED_OCTAVE_DOWN",function(){return X}),n.d(r,"NOTES_MOVED_OCTAVE_UP",function(){return J}),n.d(r,"NOTES_NUDGED",function(){return Z}),n.d(r,"NOTES_RESIZED",function(){return $}),n.d(r,"NOTES_DELETED",function(){return ee}),n.d(r,"PLAYBACK_PAUSE_REQUEST_STARTED",function(){return te}),n.d(r,"PLAYBACK_START_REQUEST_STARTED",function(){return ne}),n.d(r,"PLAYBACK_STATE_REQUEST_SUCCEEDED",function(){return oe}),n.d(r,"PLAYBACK_STOP_REQUEST_STARTED",function(){return ae}),n.d(r,"POSITION_REQUEST_SUCCEEDED",function(){return re}),n.d(r,"POSITION_SET_REQUEST_STARTED",function(){return ie}),n.d(r,"REDO_REQUESTED",function(){return ce}),n.d(r,"SEQUENCE_ADDED",function(){return se}),n.d(r,"SEQUENCE_DELETED",function(){return ue}),n.d(r,"SEQUENCE_DUPLICATED",function(){return le}),n.d(r,"SEQUENCE_EDITED",function(){return pe}),n.d(r,"SEQUENCE_EDITOR_LOADED",function(){return de}),n.d(r,"SYNC_STARTED",function(){return fe}),n.d(r,"SYNC_SUCCEEDED",function(){return he}),n.d(r,"SONG_ADD_REQUEST_STARTED",function(){return ge}),n.d(r,"SONG_ADD_REQUEST_SUCCEEDED",function(){return me}),n.d(r,"SONG_DELETE_REQUEST_STARTED",function(){return Se}),n.d(r,"SONG_DELETE_REQUEST_SUCCEEDED",function(){return Ee}),n.d(r,"SONG_EDITOR_LOADED",function(){return ye}),n.d(r,"SONG_LOADED",function(){return be}),n.d(r,"TRACK_ADDED",function(){return Oe}),n.d(r,"TRACK_DELETED",function(){return De}),n.d(r,"TRACK_IS_MUTED_TOGGLED",function(){return ve}),n.d(r,"TRACK_IS_SOLOING_TOGGLED",function(){return Ce}),n.d(r,"TRACK_VOICE_SET",function(){return Te}),n.d(r,"TRACK_VOLUME_SET",function(){return Ie}),n.d(r,"UNDO_REQUESTED",function(){return _e}),n.d(r,"USER_SIGN_IN_SUCCEEDED",function(){return je}),n.d(r,"USER_SIGN_OUT_SUCCEEDED",function(){return Ae}),n.d(r,"USER_SONG_LIBRARY_FETCH_REQUEST_SUCCEEDED",function(){return ke}),n.d(r,"undoableActions",function(){return we}),n.d(r,"serverUpdatingActions",function(){return Ne}),n.d(r,"dawwwUpdatingActions",function(){return Re}),n.d(r,"bpmSet",function(){return xe}),n.d(r,"dashboardLoaded",function(){return Pe}),n.d(r,"initialized",function(){return qe}),n.d(r,"measureCountSet",function(){return Le}),n.d(r,"noteDrawn",function(){return Ue}),n.d(r,"noteErased",function(){return Me}),n.d(r,"notesDeleted",function(){return Be}),n.d(r,"notesDragged",function(){return Ge}),n.d(r,"notesDuplicated",function(){return ze}),n.d(r,"notesMovedOctaveDown",function(){return Ke}),n.d(r,"notesMovedOctaveUp",function(){return Qe}),n.d(r,"notesNudged",function(){return Ve}),n.d(r,"notesResized",function(){return We}),n.d(r,"playbackPauseRequestStarted",function(){return He}),n.d(r,"playbackStartRequestStarted",function(){return Ye}),n.d(r,"playbackStateRequestSucceeded",function(){return Fe}),n.d(r,"playbackStopRequestStarted",function(){return Xe}),n.d(r,"positionRequestSucceeded",function(){return Je}),n.d(r,"positionSetRequestStarted",function(){return Ze}),n.d(r,"redoRequested",function(){return $e}),n.d(r,"sequenceAdded",function(){return et}),n.d(r,"sequenceDeleted",function(){return tt}),n.d(r,"sequenceDuplicated",function(){return nt}),n.d(r,"sequenceEdited",function(){return ot}),n.d(r,"sequenceEditorLoaded",function(){return at}),n.d(r,"songAddRequestStarted",function(){return rt}),n.d(r,"songAddRequestSucceeded",function(){return it}),n.d(r,"songDeleteRequestStarted",function(){return ct}),n.d(r,"songDeleteRequestSucceeded",function(){return st}),n.d(r,"songEditorLoaded",function(){return ut}),n.d(r,"songLoaded",function(){return lt}),n.d(r,"syncStarted",function(){return pt}),n.d(r,"syncSucceeded",function(){return dt}),n.d(r,"trackAdded",function(){return ft}),n.d(r,"trackDeleted",function(){return ht}),n.d(r,"trackIsMutedToggled",function(){return gt}),n.d(r,"trackIsSoloingToggled",function(){return mt}),n.d(r,"trackVoiceSet",function(){return St}),n.d(r,"trackVolumeSet",function(){return Et}),n.d(r,"undoRequested",function(){return yt}),n.d(r,"userSignInSucceeded",function(){return bt}),n.d(r,"userSignOutSucceeded",function(){return Ot}),n.d(r,"userSongLibraryFetchRequestSucceeded",function(){return Dt});var i={};n.r(i),n.d(i,"getCenteredScroll",function(){return Xt}),n.d(i,"getExtraProps",function(){return tn}),n.d(i,"toggleInArray",function(){return sn});var c={};n.r(c),n.d(c,"Box",function(){return Rt}),n.d(c,"Boxes",function(){return Pt}),n.d(c,"DownloadButton",function(){return Mt}),n.d(c,"Icon",function(){return Vt}),n.d(c,"IconButton",function(){return Ft}),n.d(c,"MatrixBox",function(){return ln}),n.d(c,"Shell",function(){return pn}),n.d(c,"Timeline",function(){return dn}),n.d(c,"Toolbar",function(){return mn}),n.d(c,"FadeIn",function(){return En}),n.d(c,"FadeOut",function(){return yn}),n.d(c,"UploadOverlay",function(){return In});var s={};n.r(s),n.d(s,"NAME",function(){return jn}),n.d(s,"authProvider",function(){return An}),n.d(s,"db",function(){return kn}),n.d(s,"SYNC_STATES",function(){return wn});var u={};n.r(u),n.d(u,"mixins",function(){return Xn}),n.d(u,"themes",function(){return Zn});var l={};n.r(l),n.d(l,"getFocusedSequenceId",function(){return eo}),n.d(l,"getIsStopped",function(){return io}),n.d(l,"getPlaybackState",function(){return ro}),n.d(l,"getPosition",function(){return co});var p={};n.r(p),n.d(p,"NAME",function(){return mo});var d={};n.r(d),n.d(d,"fetchSongById",function(){return Eo}),n.d(d,"updateSong",function(){return bo});var f={};n.r(f),n.d(f,"getBPM",function(){return vo}),n.d(f,"getDeepSequences",function(){return qo}),n.d(f,"getDeepTracks",function(){return Bo}),n.d(f,"getId",function(){return Go}),n.d(f,"getIsRedoEnabled",function(){return Qo}),n.d(f,"getIsSongLoading",function(){return Vo}),n.d(f,"getIsUndoEnabled",function(){return Wo}),n.d(f,"getMeasureCount",function(){return Ho}),n.d(f,"getName",function(){return Yo}),n.d(f,"getNoteById",function(){return wo}),n.d(f,"getNotes",function(){return ko}),n.d(f,"getNotesArray",function(){return No}),n.d(f,"getNotesBySequenceId",function(){return Fo}),n.d(f,"getSequenceById",function(){return xo}),n.d(f,"getSequences",function(){return Ro}),n.d(f,"getSequencesArray",function(){return Po}),n.d(f,"getSong",function(){return Jo}),n.d(f,"getStringifiedSong",function(){return Zo}),n.d(f,"getSyncState",function(){return ea}),n.d(f,"getTrackById",function(){return Uo}),n.d(f,"getTracks",function(){return Lo}),n.d(f,"getTracksArray",function(){return Mo});var h={};n.r(h),n.d(h,"NAME",function(){return qa});var g={};n.r(g),n.d(g,"getDidAuthenticationRun",function(){return La}),n.d(g,"getIsAuthenticated",function(){return Ga}),n.d(g,"getIsUserSongLibraryLoading",function(){return za}),n.d(g,"getUserSongLibrary",function(){return Ka}),n.d(g,"getUser",function(){return Ba});var m={};n.r(m),n.d(m,"DashboardContainer",function(){return vr});var S={};n.r(S),n.d(S,"NAME",function(){return Ar}),n.d(S,"toolTypes",function(){return kr});var E={};n.r(E),n.d(E,"SequenceEditorContainer",function(){return Gi});var y={};n.r(y),n.d(y,"TracksEditorContainer",function(){return cs});var b={};n.r(b),n.d(b,"NAME",function(){return ss});var O={};n.r(O),n.d(O,"SongEditorContainer",function(){return ks});var D={};n.r(D),n.d(D,"NAME",function(){return ws});var v={};n.r(v),n.d(v,"AppContainer",function(){return Ys});var C=n(15),T=(n(474),n(476),n(169)),I=n(453),_=n.n(I),j=n(124),A=n(0),k=n.n(A),w=n(45),N=n(51),R=n(99),x=n(125),P="audio",q=[0,1,2,3,4,5,6],L=n(12),U=n.n(L),M=U()({}),B=function(e,t){M.preview(e,t)},G=n(1057),z="BPM_SET",K="DASHBOARD_LOADED",Q="INITIALIZED",V="MEASURE_COUNT_SET",W="NOTE_DRAWN",H="NOTE_ERASED",Y="NOTES_DRAGGED",F="NOTES_DUPLICATED",X="NOTES_MOVED_OCTAVE_DOWN",J="NOTES_MOVED_OCTAVE_UP",Z="NOTES_NUDGED",$="NOTES_RESIZED",ee="NOTES_DELETED",te="PLAYBACK_PAUSE_REQUEST_STARTED",ne="PLAYBACK_START_REQUEST_STARTED",oe="PLAYBACK_STATE_REQUEST_SUCCEEDED",ae="PLAYBACK_STOP_REQUEST_STARTED",re="POSITION_REQUEST_SUCCEEDED",ie="POSITION_SET_REQUEST_STARTED",ce="REDO_REQUESTED",se="SEQUENCE_ADDED",ue="SEQUENCE_DELETED",le="SEQUENCE_DUPLICATED",pe="SEQUENCE_EDITED",de="SEQUENCE_EDITOR_LOADED",fe="SYNC_STARTED",he="SYNC_SUCCEEDED",ge="SONG_ADD_REQUEST_STARTED",me="SONG_ADD_REQUEST_SUCCEEDED",Se="SONG_DELETE_REQUEST_STARTED",Ee="SONG_DELETE_REQUEST_SUCCEEDED",ye="SONG_EDITOR_LOADED",be="SONG_LOADED",Oe="TRACK_ADDED",De="TRACK_DELETED",ve="TRACK_IS_MUTED_TOGGLED",Ce="TRACK_IS_SOLOING_TOGGLED",Te="TRACK_VOICE_SET",Ie="TRACK_VOLUME_SET",_e="UNDO_REQUESTED",je="USER_SIGN_IN_SUCCEEDED",Ae="USER_SIGN_OUT_SUCCEEDED",ke="USER_SONG_LIBRARY_FETCH_REQUEST_SUCCEEDED",we=[z,V,W,H,ee,Y,F,X,J,Z,$,se,ue,le,pe,Oe,De,ve,Ce,Te,Ie],Ne=[z,V,W,H,ee,Y,F,X,J,Z,$,ce,se,ue,le,pe,Oe,De,ve,Ce,Te,Ie,_e],Re=[].concat(Ne,[de,ye]),xe=function(e){return{type:z,payload:{bpm:e}}},Pe=function(){return{type:K}},qe=function(){return{type:Q}},Le=function(e){return{type:V,payload:{measureCount:e}}},Ue=function(e,t){return{type:W,payload:{point:e,sequence:t}}},Me=function(e){return{type:H,payload:{note:e}}},Be=function(e){return{type:ee,payload:{notes:e}}},Ge=function(e){return{type:Y,payload:{notes:e}}},ze=function(e){return{type:F,payload:{notes:e}}},Ke=function(e){return{type:X,payload:{notes:e}}},Qe=function(e){return{type:J,payload:{notes:e}}},Ve=function(e,t,n){return{type:Z,payload:{delta:e,notes:t,sequence:n}}},We=function(e){return{type:$,payload:{notes:e}}},He=function(){return{type:te}},Ye=function(){return{type:ne}},Fe=function(e){return{type:oe,payload:{playbackState:e}}},Xe=function(){return{type:ae}},Je=function(e){return{type:re,payload:{position:e}}},Ze=function(e){return{type:ie,payload:{position:e}}},$e=function(){return{type:ce}},et=function(e){return{type:se,payload:{sequence:e}}},tt=function(e){return{type:ue,payload:{sequence:e}}},nt=function(e,t){return{type:le,payload:{duplicatedSequence:e,originalSequence:t}}},ot=function(e){return{type:pe,payload:{sequence:e}}},at=function(e,t){return{type:de,payload:{sequenceId:t,songId:e}}},rt=function(e){return{type:ge,payload:{options:e}}},it=function(e){return{type:me,payload:{song:e}}},ct=function(e){return{type:Se,payload:{song:e}}},st=function(e){return{type:Ee,payload:{song:e}}},ut=function(e){return{type:ye,payload:{songId:e}}},lt=function(e){return{type:be,payload:{song:e}}},pt=function(){return{type:fe}},dt=function(){return{type:he}},ft=function(e,t){return{type:Oe,payload:{sequence:t,track:e}}},ht=function(e){return{type:De,payload:{track:e}}},gt=function(e){return{type:ve,payload:{track:e}}},mt=function(e){return{type:Ce,payload:{track:e}}},St=function(e,t){return{type:Te,payload:{track:e,voice:t}}},Et=function(e,t){return{type:Ie,payload:{track:e,volume:t}}},yt=function(){return{type:_e}},bt=function(e){return{type:je,payload:{user:e}}},Ot=function(){return{type:Ae}},Dt=function(e){return{type:ke,payload:{userSongLibrary:e}}},vt=n(7),Ct=n(11),Tt=n(9),It=n(8),_t=n(10),jt=n(2),At=n(108),kt=n.n(At),wt=jt.c.div.attrs({className:"box__resizer"})(function(e){return{backgroundColor:"transparent",bottom:"0",cursor:"col-resize",left:"0",position:"absolute",top:"0",width:e.theme.margin.m,zIndex:"2"}}),Nt=jt.c.div.withConfig({displayName:"Box__StyledBox",componentId:"sc-1yrb0pg-0"})(function(e){return{display:"flex",flexDirection:"column",height:"100%",left:0,position:"absolute",top:0,transition:"transform 200ms ease",width:e.length*e.step,zIndex:e.isDragging?"200":"100"}}),Rt=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).state={isDragging:!1},n.getPosition=function(){return{x:n.props.item.x*n.props.step,y:0}},n.getResizerPosition=function(){return{x:n.props.item.length*n.props.step-16,y:0}},n.handleDrag=function(e,t){n.props.onItemChange(Object(C.a)({},n.props.item,{x:t.x/n.props.step}))},n.handleResizerDrag=function(e,t){n.props.onItemChange(Object(C.a)({},n.props.item,{length:Math.max(1,n.props.item.length+t.deltaX/n.props.step)}))},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){var e=this;return k.a.createElement(kt.a,{axis:"x",bounds:"parent",cancel:".box__resizer",grid:[this.props.step,0],key:this.props.item.id,onDrag:this.handleDrag,onStart:function(){return e.setState({isDragging:!0})},onStop:function(){return e.setState({isDragging:!1})},position:this.getPosition()},k.a.createElement(Nt,{isDragging:this.state.isDragging,length:this.props.item.length,step:this.props.step,style:this.props.style},k.a.createElement(this.props.contentComponent,{isDragging:this.state.isDragging,item:this.props.item,step:this.props.step}),k.a.createElement(kt.a,{axis:"x",bounds:{left:this.props.step-16},grid:[this.props.step,0],onDrag:this.handleResizerDrag,position:this.getResizerPosition()},k.a.createElement(wt,null))))}}]),t}(k.a.Component);Rt.defaultProps={contentComponent:function(){return null},step:100};var xt=jt.c.div.withConfig({displayName:"Boxes__StyledBoxes",componentId:"sc-1jv62g4-0"})(function(e){return{position:"relative",width:e.length*e.step}}),Pt=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).state={draggedItemId:""},n.getBoxes=function(){return n.props.items.filter(function(e){return e.x<n.props.length})},n.handleBoxItemChange=function(e){n.setState({draggedItemId:e.id}),n.props.onItemsChange(n.props.items.map(function(t){return t.id!==e.id?t:e}))},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){var e=this;return k.a.createElement(xt,{length:this.props.length,step:this.props.step,style:this.props.style},this.getBoxes().map(function(t){return k.a.createElement(Rt,{contentComponent:e.props.boxContentComponent,key:t.id,onItemChange:e.handleBoxItemChange,step:e.props.step,item:t})}))}}]),t}(k.a.Component);Pt.defaultProps={length:0,step:100,style:{}};var qt=n(236),Lt=n(72),Ut=n.n(Lt);function Mt(e){var t=e.filename,n=e.fileContents,o=Object(qt.a)(e,["filename","fileContents"]);return k.a.createElement(Ut.a,Object.assign({download:t,href:"data:text/json;charset=utf-8,".concat(encodeURIComponent(n))},o))}var Bt=n(32),Gt=n.n(Bt),zt={"arrow-down":n(796),"arrow-left":n(797),"arrow-right":n(798),"arrow-up":n(799),"caret-down":n(800),"chevron-left":n(801),"chevron-right":n(802),cog:n(803),clone:n(804),close:n(805),eraser:n(806),"hand-paper-o":n(807),"long-arrow-down":n(808),"long-arrow-left":n(809),"long-arrow-right":n(810),"long-arrow-up":n(811),"mouse-pointer":n(812),pause:n(813),pencil:n(814),play:n(815),plus:n(816),redo:n(817),stop:n(818),trash:n(819),undo:n(820)},Kt=jt.c.div.withConfig({displayName:"Icon__IconContent",componentId:"sc-1xawmjk-0"})({alignItems:"center",display:"flex",flex:"0 0 auto",height:24,justifyContent:"center",width:24}),Qt=jt.c.div.withConfig({displayName:"Icon__StyledIcon",componentId:"sc-1xawmjk-1"})({alignItems:"center",display:"flex",flex:"0 0 auto",height:40,justifyContent:"center",width:40}),Vt=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getClassName=function(){return Gt()("icon",n.props.className)},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){var e=this;return k.a.createElement(jt.a,null,function(t){return k.a.createElement(Qt,{color:e.props.color},k.a.createElement(Kt,null,e.getIcon(t)))})}},{key:"getIcon",value:function(e){var t=zt[this.props.icon];return t?k.a.createElement(t,{color:this.props.color||e.color,size:this.getSizePixels()}):null}},{key:"getSizePixels",value:function(){switch(this.props.size){case"large":return 24;case"small":return 12;default:return 20}}}]),t}(k.a.PureComponent),Wt=jt.c.div.withConfig({displayName:"IconButton__IconButtonBackground",componentId:"sc-16yj4m5-0"})(function(e){return{backgroundColor:e.isActive?"rgba(255, 255, 255, 0.25)":"",flex:"1 0 auto"}}),Ht=jt.c.div.withConfig({displayName:"IconButton__IconButtonIconWrapper",componentId:"sc-16yj4m5-1"})(function(e){return{opacity:e.isDisabled?.5:"",position:"absolute"}}),Yt=jt.c.div.withConfig({displayName:"IconButton__StyledIconButton",componentId:"sc-16yj4m5-2"})(function(e){return{alignItems:"stretch",cursor:e.isDisabled?"not-allowed":"pointer",display:"flex",flex:"0 0 auto",flexDirection:"column",height:40,position:"relative",transform:"scale(1)",transition:"transform 200ms ease",width:40,"&:hover":{transform:e.isActive||e.isDisabled?"":"scale(1.1)"},"&:active":{transform:e.isDisabled?"":"scale(0.9)"}}}),Ft=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(e){n.props.isDisabled||n.props.onClick(e)},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(Yt,{className:this.props.className,isActive:this.props.isActive,isDisabled:this.props.isDisabled,onClick:this.handleClick,ref:this.props.getRef,style:this.props.style,title:this.props.title},k.a.createElement(Wt,{isActive:this.props.isActive}),k.a.createElement(Ht,{isDisabled:this.props.isDisabled},k.a.createElement(Vt,Object.assign({color:this.props.color,icon:this.props.icon,size:this.props.size},this.props.iconProps))))}}]),t}(k.a.PureComponent);function Xt(e){return e.scrollHeight/2-e.offsetHeight/2}Ft.defaultProps={iconProps:{}};var Jt=n(1),Zt=n.n(Jt),$t=n(60),en=n.n($t),tn=function(e){return en()(Object.keys(Zt()({},"constructor.propTypes",e)),e.props)},nn=n(47),on=n(223),an=n.n(on),rn=n(456),cn=n.n(rn);function sn(e,t){return an()(e,t)?cn()([e],t):[].concat(Object(nn.a)(t),[e])}var un=jt.c.div.withConfig({displayName:"MatrixBox__StyledMatrixBox",componentId:"sc-1cv6f89-0"})({display:"flex",flex:"1 0 auto",position:"relative"}),ln=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getClassName=function(){return Gt()("matrix-box",n.props.className)},n.getData=function(){for(var e=n.props.matrix.length,t='<path d="',o=0;o<e;o++)for(var a=n.props.matrix[o],r=a.length,i=o*(n.props.height/(e-1)),c=0;c<a.length;c++){var s=a[c],u=c*(n.props.width/(r-1));t+=n.getNodeData(s,u,i)}return t+='" fill="'.concat(n.props.fill,'"/>')},n.getNodeData=function(e,t,n){return 1===e?"M ".concat(t+1,",").concat(n+1," l1,0 l0,1 l-1,0 l0,-1"):2===e?"M ".concat(t,",").concat(n+1," l1,0 l0,-1 l1,0 l0,1 l1,0 l0,1 l-1,0 l0,1 l-1,0 l0,-1 l-1,0 l0,-1"):""},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.height!==this.props.height||e.width!==this.props.width}},{key:"render",value:function(){var e=this.props.height+3,t=this.props.width+3;return k.a.createElement(un,tn(this),k.a.createElement("svg",{height:e,style:{marginLeft:-1,marginRight:-1,marginTop:-1,marginBottom:-1},width:t,viewBox:"0 0 ".concat(t," ").concat(e),dangerouslySetInnerHTML:{__html:this.getData()}}))}}]),t}(k.a.Component),pn=jt.c.div.withConfig({displayName:"Shell",componentId:"sc-13j0uf1-0"})(function(e){return{backgroundColor:e.theme.backgroundColor,color:e.theme.almostwhite,bottom:0,display:"flex",flex:"1 1 auto",flexDirection:"column",left:0,overflow:"hidden",position:"absolute",right:0,top:0}}),dn=jt.c.div.attrs(function(e){return{style:Object(C.a)({},e.style,{transform:"translateX(".concat(e.offset,"px)")})}})(function(e){return{backgroundColor:e.theme.almostwhite,bottom:0,display:e.isVisible?"block":"none",left:0,opacity:.25,pointerEvents:"none",position:"absolute",top:0,width:2}}),fn=jt.c.div.withConfig({displayName:"Toolbar__StyledToolbar",componentId:"sc-1vtqrf5-0"})(function(e){return{alignItems:"stretch",backgroundColor:e.theme.greystone,borderTop:"1px solid ".concat(e.theme.midgray),display:"flex",flex:"0 0 auto",height:56,paddingLeft:e.theme.margin.s,paddingRight:e.theme.margin.s,position:"relative"}}),hn=jt.c.div.withConfig({displayName:"Toolbar__ToolbarLeftItems",componentId:"sc-1vtqrf5-1"})({alignItems:"center",display:"flex",flex:"1 1 auto"}),gn=jt.c.div.withConfig({displayName:"Toolbar__ToolbarRightItems",componentId:"sc-1vtqrf5-2"})({alignItems:"center",display:"flex",flex:"0 0 auto",marginLeft:"auto"}),mn=function(e){function t(){return Object(vt.a)(this,t),Object(Tt.a)(this,Object(It.a)(t).apply(this,arguments))}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(fn,tn(this),k.a.createElement(hn,null,this.getLeftItems()),k.a.createElement(gn,null,this.getRightItems()))}},{key:"getLeftItems",value:function(){return this.props.isAlternate?this.props.leftItemsAlt:this.props.leftItems}},{key:"getRightItems",value:function(){return this.props.isAlternate?this.props.rightItemsAlt:this.props.rightItems}}]),t}(k.a.Component);mn.defaultProps={leftItems:[],leftItemsAlt:[],rightItems:[],rightItemsAlt:[]};var Sn=n(55),En=function(e){var t=e.children,n=e.component,o=e.isVisible;return Object(Sn.b)(o,null,{enter:{opacity:1},from:{opacity:0}}).map(function(e){var o=e.item,a=e.key,r=e.props;return o&&k.a.createElement(n||Sn.a.div,{style:r,key:a},t)})},yn=function(e){var t=e.children,n=e.component,o=e.isVisible;return Object(Sn.b)(o,null,{from:{opacity:1},leave:{opacity:0}}).map(function(e){var o=e.item,a=e.key,r=e.props;return o&&k.a.createElement(n||Sn.a.div,{style:r,key:a},t)})},bn=n(107),On=n(37),Dn=new FileReader,vn=jt.c.div.withConfig({displayName:"UploadOverlay__StyledUploadOverlay",componentId:"pnrr3o-0"})({bottom:0,left:0,overflow:"hidden",position:"fixed",right:0,top:0,zIndex:550}),Cn=jt.c.div.withConfig({displayName:"UploadOverlay__UploadOverlayTint",componentId:"pnrr3o-1"})({alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",bottom:0,display:"flex",justifyContent:"center",left:0,overflow:"hidden",pointerEvents:"none",position:"absolute",right:0,top:0,zIndex:"inherit"}),Tn=jt.c.div.withConfig({displayName:"UploadOverlay__UploadOverlayDragIndicator",componentId:"pnrr3o-2"})(function(e){return{alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:4,display:"flex",justifyContent:"center",padding:e.theme.margin.m,pointerEvents:"none",zIndex:"inherit"}}),In=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).handleDragOver=function(e){return e.preventDefault(),e.stopPropagation(),!1},n.handleDragLeave=function(){n.props.onCancel()},n.handleDrop=function(e){var t,o=e.dataTransfer.files;return Object(bn.isEmpty)(o)?n.props.onCancel():(t=o[0],new Promise(function(e){Dn.onload=function(t){var n=t.target.result;Dn.onload=void 0,e(JSON.parse(n))},Dn.readAsText(t)})).then(n.props.onUpload).catch(n.props.onCancel),e.preventDefault(),e.stopPropagation(),!1},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return Object(On.showIf)(this.props.isFileOver)(k.a.createElement(vn,{onDragLeave:this.handleDragLeave,onDragOver:this.handleDragOver,onDrop:this.handleDrop},k.a.createElement(Cn,null,k.a.createElement(Tn,{className:"upload-overlay__tint__drag-indicator"},"Drop project file to load it"))))}}]),t}(k.a.PureComponent);var _n=n(69);_n.initializeApp({apiKey:"AIzaSyCqOmjU9tOG_qpc5cMuBhKk5pJGL76LYcY",authDomain:"zen-sequencer.firebaseapp.com",databaseURL:"https://zen-sequencer.firebaseio.com",projectId:"zen-sequencer",storageBucket:"zen-sequencer.appspot.com",messagingSenderId:"904455678701"});var jn="shared",An=!!_n.auth&&new _n.auth.GoogleAuthProvider,kn=!!_n.firestore&&_n.firestore(),wn={FAILED:"FAILED",SYNCED:"SYNCED",SYNCING:"SYNCING"},Nn=n(319),Rn=n(457),xn=n.n(Rn),Pn=n(68);Nn.a.use(xn.a).use(Pn.b).init({fallbackLng:"en",keySeparator:!1,lng:"en",resources:{en:{translation:{Delete:"Delete","Download Song":"Download Song","Edit Track":"Edit Track",English:"English",Japanese:"Japanese",PWM:"PWM","Return to Dashboard":"Return to Dashboard",SAWTOOTH:"Sawtooth","Select Language":"Select Language","Sign In":"Sign In","Sign in with Google":"Sign in with Google","Sign Out":"Sign Out","Signing Out":"Signing Out...",SINE:"Sine","Song Info":"Song Info",SQUARE:"Square",TRIANGLE:"Triangle",Voice:"Voice",Volume:"Volume"}},jp:{translation:{Delete:"\u524a\u9664","Download Song":"\u30bd\u30f3\u30b0\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","Edit Track":"\u30c8\u30e9\u30c3\u30af\u3092\u7de8\u96c6",English:"\u82f1\u8a9e",Japanese:"\u65e5\u672c\u8a9e",PWM:"PWM","Return to Dashboard":"\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u623b\u308b",SAWTOOTH:"\u306e\u3053\u304e\u308a","Select Language":"\u8a00\u8a9e\u3092\u9078\u629e\u3059\u308b","Sign In":"\u30ed\u30b0\u30a4\u30f3","Sign in with Google":"Google\u3067\u30ed\u30b0\u30a4\u30f3","Sign Out":"\u30ed\u30b0\u30a2\u30a6\u30c8","Signing Out":"\u30ed\u30b0\u30a2\u30a6\u30c8\u304c\u3057\u3066\u3044\u307e\u3059\u3002\u3002\u3002",SINE:"\u30b5\u30a4\u30f3","Song Info":"\u30bd\u30f3\u30b0\u306e\u60c5\u5831",SQUARE:"\u30b9\u30af\u30a8\u30a2",TRIANGLE:"\u4e09\u89d2",Voice:"\u97f3\u58f0",Volume:"\u30dc\u30ea\u30e5\u30fc\u30e0"}}}});var qn,Ln,Un,Mn,Bn,Gn,zn,Kn,Qn,Vn,Wn,Hn,Yn,Fn=Nn.a,Xn={interactionOverlay:function(e){return"\n\t&::after {\n\t\tbackground-color: ".concat(e,";\n\t\tbottom: 0;\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tleft: 0;\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t\tposition: absolute;\n\t\tright: 0;\n\t\ttop: 0;\n\t}\n\t&:hover::after {\n\t\topacity: 0.075;\n\t}\n\t&:active::after {\n\t\topacity: 0.15;\n\t}\n")}},Jn={backgroundColor:"#1f1f1f",color:"#EBEBEB",borderRadius:2,danger:"#FE7C7C",margin:{xs:4,s:8,m:16,l:32,xl:64},minWidthWidescreen:768,subtext:"#5C5C5C",almostblack:"#1f1f1f",almostwhite:"#EBEBEB",ashgray:"#E0E0E0",greystone:"#272727",midgray:"#454545"},Zn={emerald:Object(C.a)({},Jn,{primary:["#7BFFF2","#6AFFB7","#2BEAA4","#29965A","#2A6043"]}),mui:Object(j.createMuiTheme)({palette:{type:"dark"},typography:{fontFamily:["Open Sans","Helvetica","sans-serif"],useNextVariants:!0}})},$n={actions:r,components:c,constants:s,helpers:i,i18n:Fn,styles:u},eo=Zt()("","".concat(P,".focusedSequenceId")),to=n(63),no=n.n(to),oo=n(67),ao=n.n(oo),ro=Zt()("","".concat(P,".playbackState")),io=no()(ao()(U.a.PLAYBACK_STATES.STOPPED),ro),co=Zt()(0,"".concat(P,".position")),so=Object(G.a)({type:$n.actions.SONG_LOADED,process:function(e,t,n){var o=e.action,a=e.getState,r=eo(a());M.updateSong(Object(C.a)({},o.payload.song,{focusedSequenceId:r})),n()}}),uo=Object(G.a)({type:$n.actions.PLAYBACK_PAUSE_REQUEST_STARTED,process:function(e,t,n){M.pause(),n()}}),lo=Object(G.a)({type:$n.actions.POSITION_SET_REQUEST_STARTED,process:function(e,t,n){var o=e.action;M.setPosition(o.payload.position),n()}}),po=Object(G.a)({type:$n.actions.PLAYBACK_START_REQUEST_STARTED,process:function(e,t,n){M.start(),n()}}),fo=Object(G.a)({type:$n.actions.PLAYBACK_STOP_REQUEST_STARTED,process:function(e,t,n){M.stop(),n()}}),ho=Object(G.a)({type:$n.actions.INITIALIZED,processOptions:{dispatchMultiple:!0},warnTimeout:0,process:function(e,t){var n=e.getState;M.onPositionChange(function(e){e!==co(n())&&t($n.actions.positionRequestSucceeded(e))})}}),go=Object(G.a)({type:$n.actions.INITIALIZED,processOptions:{dispatchMultiple:!0},warnTimeout:0,process:function(e,t){M.onStateChange(function(e){t($n.actions.playbackStateRequestSucceeded(e))})}}),mo="song",So=$n.constants.db,Eo=function(e){return So.collection("songs").doc(e).get().then(function(e){return e.data()})},yo=$n.constants.db,bo=function(e){return new Promise(function(t){yo.collection("songs").doc(e.id).update(e).then(t)})},Oo=n(21),Do=n.n(Oo),vo=Zt()(0,"".concat(mo,".present.bpm")),Co=n(80),To=n.n(Co),Io=n(41),_o=n.n(Io),jo=n(34),Ao=n.n(jo),ko=Zt()({},"".concat(mo,".present.notes")),wo=function(e){return _o()(ko,Zt()({},e))},No=function(e){return _o()(ko,Object.keys,Ao()(function(t){return wo(t)(e)}))(e)},Ro=Zt()({},"".concat(mo,".present.sequences")),xo=function(e){return _o()(Ro,Zt()({},e))},Po=function(e){return _o()(Ro,Object.keys,Ao()(function(t){return xo(t)(e)}))(e)},qo=function(e){return _o()(Po,Ao()(function(e){return function(t){return Object(C.a)({},t,{notes:_o()(No,To()({sequenceId:t.id}))(e)})}}(e)))(e)},Lo=Zt()({},"".concat(mo,".present.tracks")),Uo=function(e){return _o()(Lo,Zt()({},e))},Mo=function(e){return _o()(Lo,Object.keys,Ao()(function(t){return Uo(t)(e)}))(e)},Bo=function(e){return _o()(Mo,Ao()(function(e){return function(t){return Object(C.a)({},t,{sequences:_o()(qo,To()({trackId:t.id}))(e)})}}(e)))(e)},Go=Zt()("","".concat(mo,".present.id")),zo=n(104),Ko=n.n(zo),Qo=no()(Ko()(Do.a),Zt()(0,"".concat(mo,".future"))),Vo=function(e){return!Zt()("","".concat(mo,".present.id"),e)},Wo=no()(Ko()(Do.a),Zt()(0,"".concat(mo,".past"))),Ho=Zt()(0,"".concat(mo,".present.measureCount")),Yo=Zt()("","".concat(mo,".present.name")),Fo=function(e){return function(t){return no()(To()(function(t){return t.sequenceId===e}),No)(t)}},Xo=Zt()("","".concat(mo,".present.userId")),Jo=function(e){return{bpm:vo(e),id:Go(e),measureCount:Ho(e),name:Yo(e),notes:ko(e),sequences:Ro(e),tracks:Lo(e),userId:Xo(e)}},Zo=_o()(Jo,JSON.stringify),$o=$n.constants.SYNC_STATES,ea=Zt()($o.SYNCED,"".concat(mo,".present.syncState")),ta=Object(G.a)({type:[$n.actions.SEQUENCE_EDITOR_LOADED,$n.actions.SONG_EDITOR_LOADED],warnTimeout:0,process:function(e,t,n){var o=e.action,a=e.getState;Eo(o.payload.songId).then(function(e){var o=Jo(a());Do()(e)||ao()(o,e)?n():(t($n.actions.songLoaded(e)),n())})}}),na=n(459),oa=n.n(na)()(500,function(e){return bo(e)}),aa=[ta,Object(G.a)({type:$n.actions.serverUpdatingActions,warnTimeout:0,process:function(e,t,n){e.action;var o=e.getState,a=Jo(o()),r=Object(C.a)({},a,{dateModified:Date.now()});t($n.actions.syncStarted()),oa(r).then(function(){t($n.actions.syncSucceeded()),n()}).catch(function(e){console.error("Error while updating song: ",e)})}})],ra=n(61),ia=n(315),ca=n.n(ia),sa=n(4),ua=n(28),la=Object(ua.createReducer)(120,(qn={},Object(sa.a)(qn,$n.actions.BPM_SET,function(e,t){return t.payload.bpm}),Object(sa.a)(qn,$n.actions.DASHBOARD_LOADED,function(e,t){return 120}),Object(sa.a)(qn,$n.actions.SONG_LOADED,function(e,t){return t.payload.song.bpm}),qn)),pa=Object(ua.createReducer)("",(Ln={},Object(sa.a)(Ln,$n.actions.DASHBOARD_LOADED,function(e,t){return""}),Object(sa.a)(Ln,$n.actions.SONG_LOADED,function(e,t){return t.payload.song.id}),Ln)),da=Object(ua.createReducer)(1,(Un={},Object(sa.a)(Un,$n.actions.DASHBOARD_LOADED,function(e,t){return 1}),Object(sa.a)(Un,$n.actions.MEASURE_COUNT_SET,function(e,t){return t.payload.measureCount}),Object(sa.a)(Un,$n.actions.SONG_LOADED,function(e,t){return t.payload.song.measureCount}),Un)),fa=Object(ua.createReducer)("",(Mn={},Object(sa.a)(Mn,$n.actions.DASHBOARD_LOADED,function(e,t){return""}),Object(sa.a)(Mn,$n.actions.SONG_LOADED,function(e,t){return t.payload.song.name}),Mn)),ha=n(460),ga=n.n(ha),ma={},Sa={x:0,y:12},Ea={x:0,y:-12},ya=Object(ua.createReducer)(ma,(Bn={},Object(sa.a)(Bn,$n.actions.DASHBOARD_LOADED,function(e,t){return ma}),Object(sa.a)(Bn,$n.actions.SONG_LOADED,function(e,t){return t.payload.song.notes}),Object(sa.a)(Bn,$n.actions.NOTE_DRAWN,function(e,t){var n=U.a.createNote(t.payload.sequence.id,[t.payload.point,{x:t.payload.point.x+1,y:t.payload.point.y}]);return Object(C.a)({},e,Object(sa.a)({},n.id,n))}),Object(sa.a)(Bn,$n.actions.NOTE_ERASED,function(e,t){return en()(t.payload.note.id,e)}),Object(sa.a)(Bn,$n.actions.NOTES_DELETED,function(e,t){return en()(Ao()("id",t.payload.notes),e)}),Object(sa.a)(Bn,$n.actions.NOTES_DRAGGED,function(e,t){return U.a.setAtIds(t.payload.notes,e)}),Object(sa.a)(Bn,$n.actions.NOTES_DUPLICATED,function(e,t){return U.a.setAtIds(t.payload.notes,e)}),Object(sa.a)(Bn,$n.actions.NOTES_MOVED_OCTAVE_DOWN,function(e,t){return U.a.setAtIds(Ao()(U.a.translateNote(Sa),t.payload.notes),e)}),Object(sa.a)(Bn,$n.actions.NOTES_MOVED_OCTAVE_UP,function(e,t){return U.a.setAtIds(Ao()(U.a.translateNote(Ea),t.payload.notes),e)}),Object(sa.a)(Bn,$n.actions.NOTES_NUDGED,function(e,t){return U.a.setAtIds(Ao()(U.a.translateNote(t.payload.delta),t.payload.notes),e)}),Object(sa.a)(Bn,$n.actions.NOTES_RESIZED,function(e,t){return U.a.setAtIds(t.payload.notes,e)}),Object(sa.a)(Bn,$n.actions.SEQUENCE_DUPLICATED,function(e,t){var n=To()(function(e){return e.sequenceId===t.payload.originalSequence.id},ga()(e)),o=U.a.duplicateNotes(n).map(function(e){return Object(C.a)({},e,{sequenceId:t.payload.duplicatedSequence.id})});return U.a.setAtIds(o,e)}),Bn)),ba=n(461),Oa=n.n(ba),Da={},va=Object(ua.createReducer)(Da,(Gn={},Object(sa.a)(Gn,$n.actions.DASHBOARD_LOADED,function(e,t){return Da}),Object(sa.a)(Gn,$n.actions.SONG_LOADED,function(e,t){return t.payload.song.sequences}),Object(sa.a)(Gn,$n.actions.SEQUENCE_ADDED,function(e,t){return U.a.setAtIds([t.payload.sequence],e)}),Object(sa.a)(Gn,$n.actions.SEQUENCE_DELETED,function(e,t){return en()(t.payload.sequence.id,e)}),Object(sa.a)(Gn,$n.actions.SEQUENCE_DUPLICATED,function(e,t){return U.a.setAtIds([t.payload.duplicatedSequence],e)}),Object(sa.a)(Gn,$n.actions.SEQUENCE_EDITED,function(e,t){return U.a.setAtIds([t.payload.sequence],e)}),Object(sa.a)(Gn,$n.actions.TRACK_ADDED,function(e,t){return U.a.setAtIds([t.payload.sequence],e)}),Object(sa.a)(Gn,$n.actions.TRACK_DELETED,function(e,t){return U.a.setAtIds(Oa()(function(e){return e.trackId===t.payload.track.id},e),{})}),Gn)),Ca=$n.constants.SYNC_STATES,Ta=Object(ua.createReducer)(Ca.SYNCED,(zn={},Object(sa.a)(zn,$n.actions.SONG_ADD_REQUEST_STARTED,function(e,t){return Ca.SYNCING}),Object(sa.a)(zn,$n.actions.SONG_ADD_REQUEST_SUCCEEDED,function(e,t){return Ca.SYNCED}),Object(sa.a)(zn,$n.actions.SYNC_STARTED,function(e,t){return Ca.SYNCING}),Object(sa.a)(zn,$n.actions.SYNC_SUCCEEDED,function(e,t){return Ca.SYNCED}),zn)),Ia={},_a=Object(ua.createReducer)(Ia,(Kn={},Object(sa.a)(Kn,$n.actions.DASHBOARD_LOADED,function(e,t){return Ia}),Object(sa.a)(Kn,$n.actions.SONG_LOADED,function(e,t){return t.payload.song.tracks}),Object(sa.a)(Kn,$n.actions.TRACK_ADDED,function(e,t){return U.a.setAtIds([t.payload.track],e)}),Object(sa.a)(Kn,$n.actions.TRACK_DELETED,function(e,t){return en()(t.payload.track.id)(e)}),Object(sa.a)(Kn,$n.actions.TRACK_IS_MUTED_TOGGLED,function(e,t){return U.a.setAtIds([Object(C.a)({},t.payload.track,{isMuted:!t.payload.track.isMuted,isSoloing:!1})],e)}),Object(sa.a)(Kn,$n.actions.TRACK_IS_SOLOING_TOGGLED,function(e,t){return U.a.setAtIds([Object(C.a)({},t.payload.track,{isSoloing:!t.payload.track.isSoloing,isMuted:!1})],e)}),Object(sa.a)(Kn,$n.actions.TRACK_VOICE_SET,function(e,t){return U.a.setAtIds([Object(C.a)({},t.payload.track,{voice:t.payload.voice})],e)}),Object(sa.a)(Kn,$n.actions.TRACK_VOLUME_SET,function(e,t){return U.a.setAtIds([Object(C.a)({},t.payload.track,{volume:t.payload.volume})],e)}),Kn)),ja=Object(ua.createReducer)("",(Qn={},Object(sa.a)(Qn,$n.actions.DASHBOARD_LOADED,function(e,t){return""}),Object(sa.a)(Qn,$n.actions.SONG_LOADED,function(e,t){return t.payload.song.userId}),Qn)),Aa=Object(ra.combineReducers)({bpm:la,id:pa,measureCount:da,name:fa,notes:ya,sequences:va,syncState:Ta,tracks:_a,userId:ja}),ka={constants:p,helpers:d,logic:aa,reducer:ca()(Aa,{clearHistoryType:[$n.actions.SEQUENCE_EDITOR_LOADED,$n.actions.SONG_EDITOR_LOADED],filter:Object(ia.includeAction)($n.actions.undoableActions),redoType:$n.actions.REDO_REQUESTED,syncFilter:!0,undoType:$n.actions.UNDO_REQUESTED}),selectors:f},wa=[so,uo,lo,po,fo,ho,go,Object(G.a)({type:$n.actions.dawwwUpdatingActions,process:function(e,t,n){var o=e.getState,a=ka.selectors.getSong(o()),r=eo(o())||"";M.updateSong(Object(C.a)({},a,{focusedSequenceId:r})),n()}})],Na=Object(ua.createReducer)("",(Vn={},Object(sa.a)(Vn,$n.actions.SEQUENCE_EDITOR_LOADED,function(e,t){return t.payload.sequenceId}),Object(sa.a)(Vn,$n.actions.SONG_EDITOR_LOADED,function(e,t){return""}),Vn)),Ra=Object(ua.createReducer)(U.a.PLAYBACK_STATES.STOPPED,Object(sa.a)({},$n.actions.PLAYBACK_STATE_REQUEST_SUCCEEDED,function(e,t){return t.payload.playbackState})),xa=Object(ua.createReducer)(0,Object(sa.a)({},$n.actions.POSITION_REQUEST_SUCCEEDED,function(e,t){return t.payload.position})),Pa={constants:o,helpers:a,logic:wa,reducer:Object(ra.combineReducers)({focusedSequenceId:Na,playbackState:Ra,position:xa}),selectors:l},qa="user",La=Zt()(!1,"".concat(qa,".didAuthenticationRun")),Ua=n(102),Ma=n.n(Ua),Ba=Zt()(null,"".concat(qa,".user")),Ga=function(e){return!Ma()(Ba(e))},za=function(e){return Do()(Zt()({},"".concat(qa,".userSongLibrary"),e))},Ka=Zt()({},"".concat(qa,".userSongLibrary")),Qa=$n.constants.db,Va=Object(G.a)({type:$n.actions.SONG_ADD_REQUEST_STARTED,warnTimeout:0,process:function(e,t,n){var o=e.action,a=e.getState,r=Ba(a()),i=Object(C.a)({},U.a.createSong(),{dateModified:Date.now(),userId:r.uid},o.payload.options);Qa.collection("songs").doc(i.id).set(i).then(function(){t($n.actions.songAddRequestSucceeded(i)),n()}).catch(function(e){console.error("Error while adding song: ",e)})}}),Wa=$n.constants.db,Ha=Object(G.a)({type:$n.actions.SONG_DELETE_REQUEST_STARTED,warnTimeout:0,process:function(e,t,n){var o=e.action;Wa.collection("songs").doc(o.payload.song.id).delete().then(function(){t($n.actions.songDeleteRequestSucceeded(o.payload.song)),n()}).catch(function(e){console.error("Error while deleting song: ",e)})}}),Ya=$n.constants.db,Fa=[Va,Ha,Object(G.a)({type:$n.actions.DASHBOARD_LOADED,warnTimeout:0,process:function(e,t,n){var o=e.getState,a=Ba(o());Ya.collection("songs").where("userId","==",a.uid).get().then(function(e){var o=e.docs.map(function(e){return e.data()});t($n.actions.userSongLibraryFetchRequestSucceeded(o)),n()})}}),Object(G.a)({type:$n.actions.INITIALIZED,processOptions:{dispatchMultiple:!0},warnTimeout:0,process:function(e,t,n){_n.auth().onAuthStateChanged(function(e){t(e?$n.actions.userSignInSucceeded(e):$n.actions.userSignOutSucceeded())})}})],Xa=Object(ua.createReducer)(!1,(Wn={},Object(sa.a)(Wn,$n.actions.USER_SIGN_IN_SUCCEEDED,function(e,t){return!0}),Object(sa.a)(Wn,$n.actions.USER_SIGN_OUT_SUCCEEDED,function(e,t){return!0}),Wn)),Ja=Object(ua.createReducer)(null,(Hn={},Object(sa.a)(Hn,$n.actions.USER_SIGN_IN_SUCCEEDED,function(e,t){return t.payload.user}),Object(sa.a)(Hn,$n.actions.USER_SIGN_OUT_SUCCEEDED,function(e,t){return null}),Hn)),Za=Object(ua.createReducer)({},(Yn={},Object(sa.a)(Yn,$n.actions.DASHBOARD_LOADED,function(e,t){return{}}),Object(sa.a)(Yn,$n.actions.SONG_ADD_REQUEST_SUCCEEDED,function(e,t){return U.a.setAtIds([t.payload.song],e)}),Object(sa.a)(Yn,$n.actions.SONG_DELETE_REQUEST_SUCCEEDED,function(e,t){return en()(t.payload.song.id,e)}),Object(sa.a)(Yn,$n.actions.USER_SONG_LIBRARY_FETCH_REQUEST_SUCCEEDED,function(e,t){return U.a.setAtIds(t.payload.userSongLibrary,e)}),Yn)),$a={constants:h,logic:Fa,reducer:Object(ra.combineReducers)({didAuthenticationRun:Xa,user:Ja,userSongLibrary:Za}),selectors:g},er=n(105),tr=n(123),nr=n.n(tr),or=n(464),ar=n.n(or),rr=$n.components.IconButton,ir=Object(jt.c)(rr).attrs(function(e){return{color:e.theme.almostwhite}})(function(e){return{marginRight:-1*e.theme.margin.s}}),cr=jt.c.div.withConfig({displayName:"SongListItem__SongListItemText",componentId:"t6b4g8-0"})({alignItems:"center",alignSelf:"stretch",color:"white",display:"flex",flex:"1 1 auto"}),sr=jt.c.div.withConfig({displayName:"SongListItem__StyledSongListItem",componentId:"t6b4g8-1"})(function(e){return{alignItems:"center",cursor:"pointer",display:"flex",flex:"0 0 auto",height:48,paddingLeft:e.theme.margin.m,paddingRight:e.theme.margin.m,position:"relative"}}),ur=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).delete=function(){n.props.onDelete(n.props.song)},n.open=function(){n.props.onOpen(n.props.song)},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(sr,null,k.a.createElement(cr,{onClick:this.open},this.props.song.name),k.a.createElement(ir,{icon:"close",onClick:this.delete}))}}]),t}(k.a.Component),lr=jt.c.div.withConfig({displayName:"SongList__StyledSongList",componentId:"k97c6j-0"})(function(e){return{display:"flex",flex:"1 1 auto",flexDirection:"column",paddingBottom:e.theme.margin.s,paddingTop:e.theme.margin.s}});function pr(e){var t=Object(A.useMemo)(function(){return ar()(function(e){return e.dateModified},"desc",Object.values(e.songs))},[e.songs]),n=Object(Sn.b)(t,function(e){return e.id},{config:{clamp:!0,tension:200},reset:!0,trail:100,unique:!0,from:{height:0,marginLeft:-64,opacity:0},enter:{height:48,marginLeft:0,opacity:1},leave:{height:0,marginLeft:64,opacity:0}});return k.a.createElement(lr,null,n.map(function(t){var n=t.item,o=t.key,a=t.props;return k.a.createElement(Sn.a.div,{key:o,style:a},k.a.createElement(ur,{onDelete:e.onDelete,onOpen:e.onOpen,song:n}))}))}var dr=$n.components,fr=dr.Icon,hr=dr.Toolbar,gr=dr.FadeOut,mr=Object(jt.c)(Sn.a.div)({alignItems:"center",bottom:0,color:"white",display:"flex",flex:"1 1 auto",justifyContent:"center",left:0,position:"absolute",right:0,top:0}),Sr=jt.c.div.withConfig({displayName:"Dashboard__DashboardCenteredContent",componentId:"sc-1phj4ib-0"})(function(e){return{alignSelf:"center",maxWidth:e.theme.minWidthWidescreen,width:"100%"}}),Er=jt.c.img.withConfig({displayName:"Dashboard__DashboardUserImage",componentId:"sc-1phj4ib-1"})({borderRadius:"50%",height:40,width:40}),yr=jt.c.div.withConfig({displayName:"Dashboard__DashboardUserInfo",componentId:"sc-1phj4ib-2"})({alignItems:"center",display:"flex",flex:"0 0 auto",height:"100%"}),br=jt.c.div.withConfig({displayName:"Dashboard__Fab",componentId:"sc-1phj4ib-3"})(function(e){return{alignItems:"center",backgroundColor:e.theme.almostwhite,borderRadius:"50%",bottom:24,cursor:"pointer",display:"flex",flex:"0 0 auto",height:56,justifyContent:"center",position:"absolute",right:24,width:56}}),Or=jt.c.div.withConfig({displayName:"Dashboard__StyledDashboard",componentId:"sc-1phj4ib-4"})({display:"flex",flex:"1 1 auto",flexDirection:"column",position:"relative"}),Dr=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).addSong=function(){var e=window.prompt("Enter a name for the song","New Song");e&&n.props.onSongAdd({name:e})},n.deleteSong=function(e){window.confirm('Are you sure you want to delete the song "'.concat(e.name,'"?'))&&n.props.onSongDelete(e)},n.openSong=function(e){n.props.history.push("/song/".concat(e.id))},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoad(),window.document.title="Dashboard - Aria"}},{key:"render",value:function(){var e=this;return k.a.createElement(Or,null,k.a.createElement(hr,{rightItems:k.a.createElement(k.a.Fragment,null,k.a.createElement(yr,null,k.a.createElement(Er,{alt:"User",src:this.props.user.photoURL,title:this.props.user.email})))}),k.a.createElement(gr,{component:mr,isVisible:this.props.isLoadingSongs},"LOADING SONGS..."),k.a.createElement(Sr,null,Object(On.hideIf)(this.props.isLoadingSongs)(function(){return k.a.createElement(pr,{onDelete:e.deleteSong,onOpen:e.openSong,songs:e.props.songs})})),k.a.createElement(br,{onClick:this.addSong},k.a.createElement(fr,{icon:"plus"})))}}]),t}(k.a.Component),vr=Object(x.e)(Object(N.b)(function(e){return{isLoadingSongs:$a.selectors.getIsUserSongLibraryLoading(e),songs:$a.selectors.getUserSongLibrary(e),user:$a.selectors.getUser(e)}},{onLoad:$n.actions.dashboardLoaded,onSongAdd:$n.actions.songAddRequestStarted,onSongDelete:$n.actions.songDeleteRequestStarted})(Dr)),Cr={components:m},Tr=n(93),Ir=n.n(Tr),_r=n(466),jr=n.n(_r),Ar="sequenceEditor",kr={DRAW:"DRAW",ERASE:"ERASE",SELECT:"SELECT",MOVE:"MOVE",PAN:"PAN"},wr=n(103),Nr=n.n(wr),Rr=n(467),xr=n.n(Rr),Pr=n(79),qr=n.n(Pr),Lr=n(109),Ur=$n.helpers.getExtraProps,Mr=jt.c.div.withConfig({displayName:"Note__NoteConnector",componentId:"sc-1mw8itm-0"})(function(e){return{backgroundColor:e.isSelected?"white":Object(Lr.a)(.5,e.theme.primary[2]),height:12,left:20,position:"absolute",top:14,transformOrigin:"left center",transition:"transform 0.1s ease",width:1,zIndex:100}}),Br=jt.c.div.withConfig({displayName:"Note__NoteFill",componentId:"sc-1mw8itm-1"})(function(e){return{backgroundColor:e.isSelected?"white":e.theme.primary[2],borderRadius:2,boxShadow:e.isSelected&&"0 0 10px ".concat(Object(Lr.a)(.5,"white")),height:24,width:24,"&:hover":{transform:"scale(1.05)"},"&:active":{transform:"scale(0.95)"}}}),Gr=jt.c.div.withConfig({displayName:"Note__NotePoint",componentId:"sc-1mw8itm-2"})({alignItems:"center",display:"flex",flex:"0 0 auto",height:40,justifyContent:"center",left:0,overflow:"hidden",pointerEvents:"all",position:"absolute",top:0,transition:"transform 0.1s ease",width:40,zIndex:150}),zr=jt.c.div.withConfig({displayName:"Note__StyledNote",componentId:"sc-1mw8itm-3"})(function(e){return{left:0,pointerEvents:"none",position:"absolute",top:0,transition:"transform 0.1s ease",zIndex:e.isSelected&&300}}),Kr=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getEndPointPosition=function(){return{x:40*(n.props.note.points[1].x-n.props.note.points[0].x),y:40*(n.props.note.points[1].y-n.props.note.points[0].y)}},n.getPosition=function(){return{x:40*n.props.note.points[0].x,y:40*n.props.note.points[0].y}},n.handleDrag=function(e,t){var o=t.deltaX,a=t.deltaY;n.props.onDrag({deltaX:Math.round(o/40),deltaY:Math.round(a/40)})},n.handleDragStart=function(e){n.props.onDragStart(n.props.note,e)},n.handleDragStop=function(){n.props.onDragStop()},n.handleEndPointDrag=function(e,t){var o=t.deltaX;n.props.onEndPointDrag({deltaX:Math.round(o/40)})},n.handleEndPointDragStart=function(e){n.props.onEndPointDragStart(n.props.note,e)},n.handleEndPointDragStop=function(){n.props.onEndPointDragStop()},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(kt.a,{bounds:this.props.positionBounds,grid:[40,40],handle:".start-point",onDrag:this.handleDrag,onStart:this.handleDragStart,onStop:this.handleDragStop,position:this.getPosition()},k.a.createElement(zr,Object.assign({isSelected:this.props.isSelected},Ur(this)),k.a.createElement(Gr,{className:"start-point"},k.a.createElement(Br,{isSelected:this.props.isSelected})),k.a.createElement(Mr,{isSelected:this.props.isSelected,style:this.getConnectorStyle()}),k.a.createElement(kt.a,{axis:"x",bounds:this.props.sizeBounds,grid:[40,40],onDrag:this.handleEndPointDrag,onStart:this.handleEndPointDragStart,onStop:this.handleEndPointDragStop,position:this.getEndPointPosition()},k.a.createElement(Gr,{style:this.getEndPointStyle()},k.a.createElement(Br,{isSelected:this.props.isSelected})))))}},{key:"getConnectorStyle",value:function(){var e=Nr()(this.props.note.points),t=qr()(this.props.note.points),n=Math.asin,o=Math.abs,a=Math.PI,r=Math.sign,i=Math.sqrt,c=40*(t.x-e.x),s=40*(t.y-e.y),u=0!==c?i(o(Math.pow(c,2)+Math.pow(s,2))):0,l=0!==c?n(o(s/u))*(180/a)*r(s):0;return{transform:"rotate(".concat(l,"deg) scaleX(").concat(u,")")}}},{key:"getEndPointStyle",value:function(){var e=Nr()(this.props.note.points),t=qr()(this.props.note.points),n=40*(t.x-e.x),o=40*(t.y-e.y);return{display:Qr(this.props.note)?"none":"flex",transform:"translate(".concat(n,"px, ").concat(o,"px)")}}}]),t}(k.a.PureComponent);function Qr(e){return 0===qr()(e.points).x-Nr()(e.points).x}Kr.defaultProps={onDrag:function(){},onDragStart:function(){},onDragStop:function(){},onEndPointDrag:function(){},onEndPointDragStart:function(){},onEndPointDragStop:function(){}};var Vr=Object(jt.c)(Kr)({opacity:.4,pointerEvents:"none"}),Wr=jt.c.div.withConfig({displayName:"DrawLayer__StyledDrawLayer",componentId:"knnpfb-0"})({bottom:0,left:0,position:"absolute",right:0,top:0}),Hr=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).state={isMouseOver:!1,isDrawing:!1},n.getIsDrawing=function(){return n.state.isDrawing},n.handleMouseDown=function(){n.setState({isDrawing:!0})},n.handleMouseEnter=function(){n.setState({isMouseOver:!0})},n.handleMouseLeave=function(e){if(n.setState({isMouseOver:!1}),n.getIsDrawing()){var t=".".concat(no()(Nr.a,xr()(" "))(e.target.className));!!n.elementRef.querySelector(t)||n.setState({isDrawing:!1})}},n.handleMouseUp=function(){if(n.getIsDrawing()){var e=n.props.mousePoint;n.props.onDraw(e),n.setState({isDrawing:!1})}},n.setRef=function(e){n.elementRef=e},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(Wr,{onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp,ref:this.setRef},Object(On.showIf)(this.state.isMouseOver)(k.a.createElement(Vr,{note:this.getGhostNoteNote()})))}},{key:"getGhostNoteNote",value:function(){var e=this.props.mousePoint;return{points:[{x:e?e.x:0,y:e?e.y:0},{x:e?e.x+1:0,y:e?e.y:0}]}}}]),t}(k.a.PureComponent),Yr=n(130),Fr=n(240),Xr=n.n(Fr),Jr=n(317),Zr=n.n(Jr),$r=n(318),ei=n.n($r),ti=jt.c.div.withConfig({displayName:"Notes__StyledNotes",componentId:"sc-19aj6ra-0"})(function(e){return{bottom:0,cursor:"pointer",left:0,pointerEvents:"none",position:"absolute",top:0,width:4*e.measureCount*8*40}});function ni(e){var t=Object(A.useState)({bottom:40*(12*U.a.OCTAVE_RANGE.length-1),left:0,right:40*(8*e.measureCount*4-1),top:0}),n=Object(Yr.a)(t,2),o=n[0],a=n[1],r=Object(A.useState)({left:0,right:40*(8*e.measureCount*4-1)}),i=Object(Yr.a)(r,2),c=i[0],s=i[1],u=Object(A.useState)({}),l=Object(Yr.a)(u,2),p=l[0],d=l[1],f=Object(A.useState)({}),h=Object(Yr.a)(f,2),g=h[0],m=h[1],S=function(t){return!!Ir()(function(e){return e.id===t.id},e.selectedNotes)},E=function(){return an()(e.toolType,[kr.DRAW,kr.SELECT])},y=function(t){e.toolType===kr.ERASE&&e.onErase(t)},b=function(t){var n=t.deltaX,o=t.deltaY,a=e.selectedNotes.reduce(function(e,t){var a=Zt()(0,"[".concat(t.id,"].x"),e),r=Zt()(0,"[".concat(t.id,"].y"),e),i=a+n,c=r+o;return Object(C.a)({},e,Object(sa.a)({},t.id,{x:i,y:c}))},p);if(!ao()(a,p)){var r=ai(e.selectedNotes,a);d(a),e.onDragPreview(r)}},O=function(t,n){var o=ei()(function(e){return e.id},[t].concat(Object(nn.a)(e.selectedNotes))),r=Zt()(0,"points[0].x",t),i=Zt()(0,"points[0].y",t),c=Xr()(o.map(Zt()(0,"points[1].x"))),s=Xr()(o.map(Zt()(0,"points[1].y"))),u=Zr()(o.map(Zt()(0,"points[0].x"))),l=Zr()(o.map(Zt()(0,"points[0].y"))),p=12*U.a.OCTAVE_RANGE.length-1,d=8*e.measureCount*4-1;a({bottom:40*(p-(s-i)),left:40*(r-u),right:40*(d-(c-r)),top:40*(i-l)}),y(t),j(t,n)},D=function(){e.onDrag(ai(e.notes,p)),d({})},v=function(t){var n=t.deltaX,o=e.selectedNotes.reduce(function(e,t){var o=Zt()(0,"[".concat(t.id,"].x"),e)+n;return Object(C.a)({},e,Object(sa.a)({},t.id,{x:o}))},g);ao()(o,g)||m(o)},T=function(t,n){var o=ei()(function(e){return e.id},[].concat(Object(nn.a)(e.selectedNotes),[t])),a=Xr()(o.map(Zt()(0,"points[0].x"))),r=8*e.measureCount*4-1;s({left:40,right:40*(r-a)}),j(t,n)},I=function(){e.onResize(ri(e.notes,g)),m({})},_=ri(ai(e.notes,p),g);function j(t,n){var o=n.ctrlKey||n.metaKey;!E()||e.isSelected&&!o||e.onSelect(t,o)}return k.a.createElement(ti,{measureCount:e.measureCount},_.map(function(t){return k.a.createElement(Kr,{className:"notes__note",isSelected:S(t),key:t.id,onDrag:b,onDragStart:O,onDragStop:D,onEndPointDrag:v,onEndPointDragStart:T,onEndPointDragStop:I,onSelect:e.onSelect,positionBounds:o,sizeBounds:c,toolType:e.toolType,note:t})}))}ni.defaultProps={selectedNotes:[]};var oi=k.a.memo(ni);function ai(e,t){return e.map(function(e){var n=t[e.id];return n?Object(C.a)({},e,{points:e.points.map(function(e){return{x:e.x+n.x,y:e.y+n.y}})}):e})}function ri(e,t){return e.map(function(e){var n=t[e.id];return n?Object(C.a)({},e,{points:[e.points[0],{x:e.points[1].x+n.x,y:e.points[1].y}]}):e})}var ii=jt.c.div.withConfig({displayName:"Panner__StyledPanner",componentId:"sc-8vtnbs-0"})({bottom:0,cursor:"grab",left:0,position:"absolute",right:0,top:0}),ci=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).state={startPoint:{}},n.getIsPanning=function(){return!Do()(n.state.startPoint)},n.handleMouseDown=function(e){e.preventDefault(),e.stopPropagation(),n.setState({startPoint:n.getStartPoint(e)})},n.handleMouseLeave=function(){n.getIsPanning()&&n.setState({startPoint:{}})},n.handleMouseMove=function(e){if(n.getIsPanning()){var t=e.pageX-n.state.startPoint.x,o=e.pageY-n.state.startPoint.y,a=n.state.startPoint.scrollLeft-t,r=n.state.startPoint.scrollTop-o;n.props.scrollLeftEl.scrollLeft=a,n.props.scrollTopEl.scrollTop=r}},n.handleMouseUp=function(){n.getIsPanning()&&n.setState({startPoint:{}})},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(ii,{onMouseDown:this.handleMouseDown,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp})}},{key:"getStartPoint",value:function(e){return{scrollLeft:this.props.scrollLeftEl.scrollLeft,scrollTop:this.props.scrollTopEl.scrollTop,x:e.pageX,y:e.pageY}}}]),t}(k.a.PureComponent),si=jt.c.div.withConfig({displayName:"Fence__StyledFence",componentId:"qi97x-0"})({backgroundColor:"rgba(255, 255, 255, 0.25)",border:"2px solid white",borderRadius:2,left:0,pointerEvents:"none",position:"absolute",top:0}),ui=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getIsSelecting=function(){return!Do()(n.props.startPoint)},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(si,{style:{display:this.getDisplay(),height:this.getHeight(),transform:this.getTransform(),width:this.getWidth()}})}},{key:"getDisplay",value:function(){var e=this.getIsSelecting(),t=this.props.startPoint,n=this.props.endPoint,o=!ao()(t,n);return e&&o?"block":"none"}},{key:"getHeight",value:function(){var e=this.props.startPoint,t=this.props.endPoint;return Do()(e)||Do()(t)?0:40*(Math.abs(this.props.endPoint.y-e.y)+1)}},{key:"getTransform",value:function(){var e=this.props.startPoint,t=this.props.endPoint;if(Do()(e)||Do()(t))return"translate(0px, 0px)";var n=40*Math.min(e.x,t.x),o=40*Math.min(e.y,t.y);return"translate(".concat(n,"px, ").concat(o,"px)")}},{key:"getWidth",value:function(){var e=this.props.startPoint,t=this.props.endPoint;return Do()(e)||Do()(t)?0:40*(Math.abs(t.x-e.x)+1)}}]),t}(k.a.PureComponent),li=jt.c.div.withConfig({displayName:"Selector__StyledSelector",componentId:"sc-9l5c4j-0"})({bottom:0,left:0,position:"absolute",right:0,top:0}),pi=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).state={endPoint:{},startPoint:{}},n.handleMouseDown=function(){n.setState({startPoint:n.props.mousePoint})},n.handleMouseUp=function(e){Do()(n.state.startPoint)||(n.props.onSelect(n.state.startPoint,e.ctrlKey||e.metaKey),n.setState({startPoint:{}}))},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"componentWillReceiveProps",value:function(e){(e.mousePoint.x<0||e.mousePoint.y<0)&&this.setState({startPoint:{}})}},{key:"render",value:function(){return k.a.createElement(li,{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,style:{pointerEvents:this.props.isEnabled?"all":"none"}},k.a.createElement(ui,{endPoint:this.props.mousePoint,startPoint:this.state.startPoint}))}}]),t}(k.a.PureComponent),di=n(91),fi=n.n(di),hi=jt.c.div.withConfig({displayName:"Slots__StyledSlots",componentId:"sc-1nk4wcf-0"})({flex:"1 0 auto",minHeight:"100%"}),gi=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getStripe=function(e){return'\n    <rect\n      fill="white"\n      opacity="0.02"\n      rx="4"\n      ry="4"\n      x="'.concat(320*(2*e+1),'"\n      y="0"\n      width="320"\n      height="').concat(40*U.a.SCALE.length,'"\n    ></rect>\n  ')},n.getWidth=function(){return 4*n.props.measureCount*8*40},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(hi,{dangerouslySetInnerHTML:{__html:this.getHTML()}})}},{key:"getHTML",value:function(){var e=this,t=fi()(0,4*this.props.measureCount*8).map(function(e){return fi()(0,U.a.SCALE.length).map(function(t){return function(e,t){var n=(Math.floor(e/8),"white");return'\n    <rect\n      fill="'.concat(n,'"\n      opacity="0.5"\n      x="').concat(40*e+18.5,'"\n      y="').concat(40*t+19.5,'"\n      width="').concat(3,'"\n      height="').concat(1,'"\n    ></rect>\n    <rect\n      fill="').concat(n,'"\n      opacity="0.5"\n      x="').concat(40*e+19.5,'"\n      y="').concat(40*t+18.5,'"\n      width="').concat(1,'"\n      height="').concat(3,'"\n    ></rect>\n  ')}(e,t)})}),n=fi()(0,2*this.props.measureCount).map(function(t){return e.getStripe(t)});return'\n      <svg\n        width="'.concat(4*this.props.measureCount*8*40,'"\n        height="').concat(40*U.a.SCALE.length,'"\n        viewBox="0 0 ').concat(4*this.props.measureCount*8*40," ").concat(40*U.a.SCALE.length,'">\n        ').concat(n,"\n        ").concat(t,"\n      </svg>\n    ")}}]),t}(k.a.PureComponent);var mi=$n.components.Timeline,Si=jt.c.div.withConfig({displayName:"Grid__GridWrapper",componentId:"sc-1k00hzh-0"})({height:"100%",overflowX:"visible",position:"relative"}),Ei=jt.c.div.withConfig({displayName:"Grid__StyledGrid",componentId:"sc-1k00hzh-1"})({overflowX:"scroll",overflowY:"visible",paddingLeft:80,position:"relative"}),yi=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).handleSelectorSelect=function(e,t){return n.props.onSelectInArea(e,n.props.mousePoint,t)},n.setRef=function(e){n.elementRef=e},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(Ei,{onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,ref:this.setRef},k.a.createElement(Si,{style:this.getWrapperStyle()},k.a.createElement(gi,{measureCount:this.props.measureCount}),Object(On.showIf)(this.props.toolType===kr.DRAW)(k.a.createElement(Hr,{mousePoint:this.props.mousePoint,onDraw:this.props.onDraw})),k.a.createElement(pi,{isEnabled:this.props.toolType===kr.SELECT,mousePoint:this.props.mousePoint,notes:this.props.notes,onSelect:this.handleSelectorSelect,selectedNotes:this.props.selectedNotes}),k.a.createElement(oi,{measureCount:this.props.measureCount,notes:this.props.notes,onDrag:this.props.onDrag,onDragPreview:this.props.onDragPreview,onErase:this.props.onErase,onResize:this.props.onResize,onSelect:this.props.onSelect,selectedNotes:this.props.selectedNotes,toolType:this.props.toolType}),Object(On.showIf)(this.props.toolType===kr.PAN)(k.a.createElement(ci,{scrollLeftEl:this.elementRef,scrollTopEl:this.props.sequenceEditorContentRef})),k.a.createElement(mi,{isVisible:!1,offset:0})))}},{key:"getWrapperStyle",value:function(){return{width:void 0!==this.props.measureCount?4*this.props.measureCount*8*40+80:0}}}]),t}(k.a.PureComponent),bi=jt.c.div.withConfig({displayName:"Key__KeyLabel",componentId:"sc-6qsck0-0"})(function(e){return{color:e.theme.almostblack,display:Object(bn.includes)("C",e.step.name)&&!Object(bn.includes)("#",e.step.name)?"block":"none"}}),Oi=jt.c.div.withConfig({displayName:"Key__StyledKey",componentId:"sc-6qsck0-1"})(function(e){return{alignItems:"center",backgroundColor:Object(bn.includes)("#",e.step.name)?Object(Lr.a)(.75,e.theme.almostwhite):e.theme.almostwhite,boxShadow:"2px 0 0 ".concat(Object(Lr.a)(Object(bn.includes)("#",e.step.name)?.9:.5,e.theme.almostwhite)),cursor:"pointer",display:"flex",flex:"0 0 auto",height:36,justifyContent:"center",marginBottom:2,marginTop:2,position:"relative","&::after":{backgroundColor:e.theme.primary[2],bottom:0,boxShadow:"2px 0 5px ".concat(e.theme.primary[2]),content:"''",display:"block",right:-2,opacity:e.isHoveredRow?1:0,pointerEvents:"none",position:"absolute",top:0,transition:"opacity 50ms ease",width:2}}}),Di=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).handleMouseDown=function(){return n.props.onMouseDown(n.props.step)},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(Oi,{isHoveredRow:this.props.isHoveredRow,onMouseDown:this.handleMouseDown,step:this.props.step,style:this.props.style},k.a.createElement(bi,{step:this.props.step},this.props.step.name))}}]),t}(k.a.PureComponent),vi=jt.c.div.withConfig({displayName:"Keys__StyledKeys",componentId:"sc-12cwa59-0"})({display:"flex",flex:"0 0 auto",flexDirection:"column",width:40}),Ci=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getIsHoveredRow=function(e){return e.y===n.props.gridMousePoint.y},n.getScale=function(){return U.a.SCALE},n.handleKeyMouseDown=function(e){n.props.onKeyPress(e.y)},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){var e=this;return k.a.createElement(vi,null,this.getScale().map(function(t,n){return k.a.createElement(Di,{isHoveredRow:e.getIsHoveredRow(t),key:t.y,onMouseDown:e.handleKeyMouseDown,step:t,style:{borderBottomRightRadius:n===e.getScale().length-1?4:"",boxShadow:n===e.getScale().length-1?"2px 2px 0 rgba(235, 235, 235, 0.5)":"",borderTopRightRadius:0===n?4:""}})}))}}]),t}(k.a.PureComponent),Ti=$n.components,Ii=Ti.IconButton,_i=Ti.Toolbar,ji=kr,Ai=ji.DRAW,ki=ji.ERASE,wi=ji.PAN,Ni=ji.SELECT,Ri=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getAreSomeNotesSelected=function(){return!Do()(n.props.selectedNotes)},n.getIsOctaveDownButtonDisabled=function(){return U.a.someNoteWillMoveOutside(n.props.measureCount,{x:0,y:12},n.props.selectedNotes)},n.getIsOctaveUpButtonDisabled=function(){return U.a.someNoteWillMoveOutside(n.props.measureCount,{x:0,y:-12},n.props.selectedNotes)},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(_i,{className:"sequence-editor-toolbar",isAlternate:this.getAreSomeNotesSelected(),leftItems:k.a.createElement(k.a.Fragment,null,k.a.createElement(Ii,{icon:"arrow-left",onClick:this.props.onClose,toolTip:"Back to tracks"})),leftItemsAlt:k.a.createElement(k.a.Fragment,null,k.a.createElement(Ii,{icon:"close",onClick:this.props.onDeselectAll,toolTip:"Deselect notes"})),rightItems:k.a.createElement(k.a.Fragment,null,k.a.createElement(Ii,{icon:"undo",isDisabled:!this.props.isUndoEnabled,onClick:this.props.onUndo,title:"Undo"}),k.a.createElement(Ii,{icon:"redo",isDisabled:!this.props.isRedoEnabled,onClick:this.props.onRedo,title:"Redo"}),k.a.createElement(Ii,{isActive:this.props.toolType===Ni,icon:"mouse-pointer",onClick:this.props.onSelectToolSelect,title:"Select"}),k.a.createElement(Ii,{isActive:this.props.toolType===Ai,icon:"pencil",onClick:this.props.onDrawToolSelect,title:"Draw"}),k.a.createElement(Ii,{isActive:this.props.toolType===ki,icon:"eraser",onClick:this.props.onEraseToolSelect,title:"Erase"}),k.a.createElement(Ii,{isActive:this.props.toolType===wi,icon:"hand-paper-o",onClick:this.props.onPanToolSelect,title:"Pan"})),rightItemsAlt:k.a.createElement(k.a.Fragment,null,k.a.createElement(Ii,{icon:"undo",isDisabled:!this.props.isUndoEnabled,onClick:this.props.onUndo,title:"Undo"}),k.a.createElement(Ii,{icon:"redo",isDisabled:!this.props.isRedoEnabled,onClick:this.props.onRedo,title:"Redo"}),k.a.createElement(Ii,{icon:"trash",onClick:this.props.onDelete,title:"Delete"}),k.a.createElement(Ii,{icon:"clone",onClick:this.props.onDuplicate,title:"Duplicate"}),k.a.createElement(Ii,{icon:"arrow-up",isDisabled:this.getIsOctaveUpButtonDisabled(),onClick:this.props.onOctaveUp,toolTip:"Octave up"}),k.a.createElement(Ii,{icon:"arrow-down",isDisabled:this.getIsOctaveDownButtonDisabled(),onClick:this.props.onOctaveDown,toolTip:"Octave down"}))})}}]),t}(k.a.PureComponent),xi=Pa.helpers.previewPitch,Pi=jt.c.div.withConfig({displayName:"SequenceEditor__LoadingIndicator",componentId:"lt5aq6-0"})({alignItems:"center",color:"white",display:"flex",flex:"1 1 auto",justifyContent:"center"}),qi=jt.c.div.withConfig({displayName:"SequenceEditor__SequenceEditorContent",componentId:"lt5aq6-1"})({display:"flex",flex:"1 1 auto",flexDirection:"column",overflowX:"hidden",overflowY:"scroll"}),Li=jt.c.div.withConfig({displayName:"SequenceEditor__SequenceEditorWrapper",componentId:"lt5aq6-2"})({display:"flex",flex:"1 0 auto",paddingBottom:64,paddingTop:64}),Ui=Object(jt.c)(er.HotKeys)({display:"flex",flex:"1 1 auto",flexDirection:"column",overflow:"hidden",position:"relative"}),Mi=function(e){function t(e){var n;return Object(vt.a)(this,t),(n=Object(Tt.a)(this,Object(It.a)(t).call(this,e))).activateDrawTool=function(){n.setState({toolType:kr.DRAW})},n.activatePanOverride=function(e){e.preventDefault(),e.repeat||(n.setState(function(e){return{previousToolType:e.toolType,toolType:kr.PAN}}),window.addEventListener("keyup",n.deactivatePanOverride))},n.activateEraseTool=function(){n.setState({toolType:kr.ERASE})},n.activatePanTool=function(){n.setState({toolType:kr.PAN})},n.activateSelectTool=function(){n.setState({toolType:kr.SELECT})},n.close=function(){n.props.history.push("/song/".concat(n.props.match.params.songId))},n.deactivatePanOverride=function(e){32===e.keyCode&&(n.setState(function(e){return{toolType:e.previousToolType}}),window.removeEventListener("keyup",n.deactivatePanOverride))},n.deleteSelectedNotes=function(e){if(e.preventDefault(),!Do()(n.state.selectedNoteIds)){var t=n.getSelectedNotes();n.setState({selectedNoteIds:[]}),n.props.onDelete(t)}},n.deselectAllNotes=function(e){e.preventDefault(),Do()(n.state.selectedNoteIds)||n.setState({selectedNoteIds:[]})},n.duplicateSelectedNotes=function(e){if(e.preventDefault(),!Do()(n.state.selectedNoteIds)){var t=U.a.duplicateNotes(n.getSelectedNotes());n.props.onDuplicate(t),n.setState({selectedNoteIds:Ao()("id",t)})}},n.getKeyHandlers=function(){return{backspace:n.deleteSelectedNotes,d:n.activateDrawTool,del:n.deleteSelectedNotes,down:n.nudgeDown,e:n.activateEraseTool,left:n.nudgeLeft,p:n.activatePanTool,right:n.nudgeRight,s:n.activateSelectTool,space:n.activatePanOverride,up:n.nudgeUp,"ctrl+a":n.selectAll,"ctrl+d":n.deselectAllNotes,"ctrl+shift+d":n.duplicateSelectedNotes,"ctrl+alt+z":n.props.onRedo,"ctrl+z":n.props.onUndo,"meta+a":n.selectAll,"meta+d":n.deselectAllNotes,"meta+shift+d":n.duplicateSelectedNotes,"meta+alt+z":n.props.onRedo,"meta+z":n.props.onUndo}},n.getSelectedNotes=function(){return Ao()(function(e){return Ir()(function(t){return t.id===e},n.props.notes)||{}},n.state.selectedNoteIds)},n.handleGridDragPreview=function(e){var t=Zt()(-1,"[0].points[0].y",e);n.previewPitch(t)},n.handleGridDraw=function(e){var t=Zt()(-1,"y",e);n.previewPitch(t),n.props.onDraw(e)},n.handleGridErase=function(e){n.props.onErase(e),n.setState({selectedNoteIds:[]})},n.handleGridMouseLeave=function(e){n.setState({gridMousePoint:{x:-1,y:-1}})},n.handleGridMouseMove=function(e){var t=function(e,t,n){var o=n.pageX||0,a=n.pageY||0,r=e.offsetLeft||0,i=e.offsetTop||0,c=e.scrollLeft||0,s=t.scrollTop||0;return{x:Bi(o-r+c-80),y:Bi(a-i+s)}}(e.currentTarget,n.contentElementRef,e);n.setState(function(e){return ao()(e.gridMousePoint,t)?null:{gridMousePoint:t}})},n.handleGridSelect=function(e,t){var o=Zt()(-1,"points[0].y",e);n.previewPitch(o),n.setState(function(n){return{selectedNoteIds:t?$n.helpers.toggleInArray(e.id,n.selectedNoteIds):[e.id]}})},n.handleGridSelectInArea=function(e,t,o){var a=U.a.getNotesInArea(e,t,n.props.notes);n.setState(function(e){return{selectedNoteIds:o?jr()([].concat(Object(nn.a)(e.selectedNoteIds),Object(nn.a)(Ao()("id",a)))):Ao()("id",a)}})},n.handleToolbarOctaveDown=function(){return n.props.onOctaveDown(n.getSelectedNotes())},n.handleToolbarOctaveUp=function(){return n.props.onOctaveUp(n.getSelectedNotes())},n.nudge=function(e){if(!Do()(n.state.selectedNoteIds)&&!U.a.someNoteWillMoveOutside(n.props.sequence.measureCount,e,n.getSelectedNotes())){var t=n.getSelectedNotes(),o=Zt()(-1,"[0].points[0].y",t);n.previewPitch(o+e.y),n.props.onNudge(e,t)}},n.nudgeDown=function(e){e.preventDefault(),n.nudge({x:0,y:1})},n.nudgeLeft=function(e){e.preventDefault(),n.nudge({x:-1,y:0})},n.nudgeRight=function(e){e.preventDefault(),n.nudge({x:1,y:0})},n.nudgeUp=function(e){e.preventDefault(),n.nudge({x:0,y:-1})},n.previewPitch=function(e){xi(n.props.sequence.trackId,e)},n.redo=function(){n.props.isRedoEnabled&&n.props.onRedo()},n.selectAll=function(){n.props.notes.length!==n.state.selectedNoteIds.length&&n.setState({selectedNoteIds:Ao()("id",n.props.notes)})},n.setContentRef=function(e){n.contentElementRef=e,n.forceUpdate()},n.undo=function(){n.props.isUndoEnabled&&n.props.onUndo()},n.focusRef=k.a.createRef(),n.state={gridMousePoint:{x:-1,y:-1},previousToolType:kr.SELECT,selectedNoteIds:[],toolType:kr.SELECT},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoad(this.props.match.params.songId,this.props.match.params.sequenceId),this.focusRef.current.focus(),this.contentElementRef&&(this.contentElementRef.scrollTop=$n.helpers.getCenteredScroll(this.contentElementRef))}},{key:"componentDidUpdate",value:function(e){e.sequence!==this.props.sequence&&this.contentElementRef&&(this.contentElementRef.scrollTop=$n.helpers.getCenteredScroll(this.contentElementRef))}},{key:"render",value:function(){return k.a.createElement(Ui,{focused:!0,handlers:this.getKeyHandlers()},k.a.createElement("div",{ref:this.focusRef,tabIndex:-1}),Object(On.showIf)(this.props.isLoading)(k.a.createElement(Pi,null,"LOADING SONG...")),Object(On.hideIf)(this.props.isLoading)(k.a.createElement(k.a.Fragment,null,k.a.createElement(qi,{ref:this.setContentRef},k.a.createElement(Li,null,k.a.createElement(Ci,{gridMousePoint:this.state.gridMousePoint,onKeyPress:this.previewPitch}),k.a.createElement(yi,{measureCount:this.props.sequence.measureCount,mousePoint:this.state.gridMousePoint,notes:this.props.notes,onDrag:this.props.onDrag,onDragPreview:this.handleGridDragPreview,onDraw:this.handleGridDraw,onErase:this.handleGridErase,onMouseLeave:this.handleGridMouseLeave,onMouseMove:this.handleGridMouseMove,onResize:this.props.onResize,onSelect:this.handleGridSelect,onSelectInArea:this.handleGridSelectInArea,selectedNotes:this.getSelectedNotes(),sequenceEditorContentRef:this.contentElementRef,toolType:this.state.toolType}))),k.a.createElement(Ri,{isRedoEnabled:this.props.isRedoEnabled,isUndoEnabled:this.props.isUndoEnabled,measureCount:this.props.sequence.measureCount,onClose:this.close,onDelete:this.deleteSelectedNotes,onDeselectAll:this.deselectAllNotes,onDrawToolSelect:this.activateDrawTool,onDuplicate:this.duplicateSelectedNotes,onEraseToolSelect:this.activateEraseTool,onOctaveDown:this.handleToolbarOctaveDown,onOctaveUp:this.handleToolbarOctaveUp,onPanToolSelect:this.activatePanTool,onRedo:this.redo,onSelectToolSelect:this.activateSelectTool,onUndo:this.undo,selectedNotes:this.getSelectedNotes(),toolType:this.state.toolType}))))}}]),t}(k.a.PureComponent);function Bi(e){return Math.floor(e/40)}var Gi=Object(N.b)(function(e,t){return{isLoading:ka.selectors.getIsSongLoading(e),isRedoEnabled:ka.selectors.getIsRedoEnabled(e),isUndoEnabled:ka.selectors.getIsUndoEnabled(e),notes:ka.selectors.getNotesBySequenceId(t.match.params.sequenceId)(e),sequence:ka.selectors.getSequenceById(t.match.params.sequenceId)(e)}},{onDelete:$n.actions.notesDeleted,onDraw:$n.actions.noteDrawn,onDrag:$n.actions.notesDragged,onDuplicate:$n.actions.notesDuplicated,onErase:$n.actions.noteErased,onLoad:$n.actions.sequenceEditorLoaded,onNudge:$n.actions.notesNudged,onOctaveDown:$n.actions.notesMovedOctaveDown,onOctaveUp:$n.actions.notesMovedOctaveUp,onRedo:$n.actions.redoRequested,onResize:$n.actions.notesResized,onUndo:$n.actions.undoRequested},function(e,t,n){return Object(C.a)({},n,e,t,{onDraw:function(n){return t.onDraw(n,e.sequence)},onNudge:function(n,o){return t.onNudge(n,o,e.sequence)}})})(Mi),zi={components:E,constants:S},Ki=jt.c.div.withConfig({displayName:"AddTrackButton__AddTrackButtonPlusHorizontal",componentId:"pv1zsl-0"})({backgroundColor:"white",height:1,left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:9}),Qi=jt.c.div.withConfig({displayName:"AddTrackButton__AddTrackButtonPlusVertical",componentId:"pv1zsl-1"})({backgroundColor:"white",height:9,left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:1}),Vi=jt.c.div.withConfig({displayName:"AddTrackButton__StyledAddTrackButton",componentId:"pv1zsl-2"})({alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.5)",border:"1px solid white",cursor:"pointer",display:"flex",flex:"0 0 auto",height:36,justifyContent:"center",position:"relative",transform:"scale(1)",transition:"transform 0.2s ease",width:36,"&:hover:not(:active)":{backgroundColor:"rgba(255, 255, 255, 0.6)",transform:"scale(1.1)"},"&:active":{transform:"scale(0.9)"}});function Wi(e){return k.a.createElement(Vi,{onClick:e.onClick,style:e.style},k.a.createElement(Qi,{className:"add-track-button__plus__vertical"}),k.a.createElement(Ki,{className:"add-track-button__plus__horizontal"}))}var Hi=n(468),Yi=n.n(Hi),Fi=n(81),Xi=n.n(Fi),Ji=jt.c.div.withConfig({displayName:"RulerResizer__DraggableWrapper",componentId:"sc-856fyl-0"})({position:"absolute",transition:"transform 200ms ease"}),Zi=jt.c.div.withConfig({displayName:"RulerResizer__StyledRulerResizer",componentId:"sc-856fyl-1"})(function(e){return Object(C.a)({backgroundColor:"rgba(255, 255, 255, 0.5)",border:"1px solid white",cursor:"col-resize",height:32,left:0,position:"absolute",top:3,transition:"box-shadow 250ms ease, opacity 500ms ease, transform 350ms ease",width:24,"&:hover:not(:active)":{backgroundColor:"rgba(255, 255, 255, 0.6)"},"&:active":{backgroundColor:"rgba(255, 255, 255, 0.4)"},":after":{borderLeft:"2px dotted white",borderRight:"2px dotted white",content:"''",display:"block",height:10,left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:4}},e.isDragging?{boxShadow:"0 4px 16px 4px rgba(0, 0, 0, 0.25)",opacity:.8,transform:"translateY(-4px) scale(1.05)",transition:"box-shadow 250ms ease, opacity 500ms ease, transform 150ms ease"}:{})});function $i(e){var t=Object(A.useState)(!1),n=Object(Yr.a)(t,2),o=n[0],a=n[1];return k.a.createElement(kt.a,{axis:"x",bounds:{left:48},grid:[64,0],onDrag:function(t,n){e.onSizeChange(Math.max(1,e.size+Math.round(n.deltaX/64)))},onStart:function(){return a(!0)},onStop:function(){return a(!1)},position:{x:64*e.size+16,y:0}},k.a.createElement(Ji,null,k.a.createElement(Zi,{isDragging:o})))}var ec=$n.components.MatrixBox,tc=jt.c.div.withConfig({displayName:"Ruler__RulerMeasureNumber",componentId:"sc-2zt3v5-0"})({color:"rgba(255, 255, 255, 0.5)",fontSize:10,position:"absolute"}),nc=jt.c.div.withConfig({displayName:"Ruler__StyledRuler",componentId:"sc-2zt3v5-1"})(function(e){return{cursor:"pointer",display:"flex",flex:"0 0 auto",height:35,marginBottom:e.theme.margin.m,position:"relative"}}),oc=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getMatrix=function(){return Xi()(function(e){return Xi()(function(t){return 0===t||t%8===0?0===e||4===e?2:1:0===e?1:0},8*n.props.measureCount+1)},5)},n.getWidth=function(){return n.props.measureWidth*n.props.measureCount+1},n.handleClick=function(e){if(!n.props.isStopped){var t=Zt()(0,"nativeEvent.offsetX",e)/n.props.measureWidth;n.props.onPositionSet(Yi()(32*t))}},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(nc,{onClick:this.handleClick,style:{width:this.getWidth()}},k.a.createElement(ec,{fill:"white",height:35,matrix:this.getMatrix(),width:this.getWidth()}),Xi()(function(e){return k.a.createElement(tc,{key:e,style:{left:64*e+6,bottom:0}},e+1)},this.props.measureCount),k.a.createElement($i,{onSizeChange:this.props.onMeasureCountChange,size:this.props.measureCount}))}},{key:"getIsLastMeasure",value:function(e){return e===this.props.measureCount}},{key:"getMeasuresStyle",value:function(){return{width:this.props.measureCount*this.props.measureWidth}}}]),t}(k.a.PureComponent),ac=n(52),rc=n(469),ic=n.n(rc),cc=n(470),sc=n.n(cc),uc=n(170),lc=n.n(uc),pc=jt.c.div.withConfig({displayName:"AddSequenceButton__AddSequenceButtonPlusHorizontal",componentId:"bqlbtr-0"})(function(e){return{backgroundColor:e.theme.primary[2],height:1,left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:9}}),dc=jt.c.div.withConfig({displayName:"AddSequenceButton__AddSequenceButtonPlusVertical",componentId:"bqlbtr-1"})(function(e){return{backgroundColor:e.theme.primary[2],height:9,left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:1}}),fc=jt.c.div.withConfig({displayName:"AddSequenceButton__StyledAddSequenceButton",componentId:"bqlbtr-2"})(function(e){return{alignItems:"center",backgroundColor:Object(Lr.a)(.5,e.theme.primary[2]),border:"1px solid ".concat(e.theme.primary[2]),cursor:"pointer",display:"flex",flex:"0 0 auto",height:84,justifyContent:"center",position:"absolute",width:64}}),hc=function(e){function t(){return Object(vt.a)(this,t),Object(Tt.a)(this,Object(It.a)(t).apply(this,arguments))}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(fc,{className:"add-sequence-button",onClick:this.props.onClick,style:this.props.style},k.a.createElement(dc,{className:"add-sequence-button__plus__vertical"}),k.a.createElement(pc,{className:"add-sequence-button__plus__horizontal"}))}}]),t}(k.a.PureComponent),gc=jt.c.div.withConfig({displayName:"TrackSequenceNote",componentId:"sc-9j1nra-0"})(function(e){var t=Zt()(0,"note.points[0].x",e),n=Zt()(0,"note.points[1].x",e),o=Zt()(0,"note.points[0].y",e);return{backgroundColor:e.theme.almostblack,height:1,left:0,position:"absolute",top:0,transform:"translate(".concat(2*t,"px, ").concat(o,"px)"),width:2*(n-t+1)}}),mc=jt.c.div.withConfig({displayName:"TrackSequence__StyledTrackSequence",componentId:"w28444-0"})(function(e){return Object(C.a)({display:"flex",height:84,padding:e.theme.margin.s,backgroundColor:e.isSelected?e.theme.almostwhite:e.theme.primary[2],borderRight:"2px solid ".concat(e.isSelected?e.theme.almostwhite:e.theme.primary[0]),boxShadow:e.isSelected&&"0 0 10px rgba(255, 255, 255, 0.5)}",opacity:e.isMounted?1:0,overflow:"hidden",position:"relative",transform:e.isMounted?"scaleY(1)":"scaleY(0)",transition:"box-shadow 250ms ease, opacity 500ms ease, transform 350ms ease","&:hover":{backgroundColor:!e.isSelected&&e.theme.primary[1]}},e.isDragging?{boxShadow:"0 4px 16px 4px rgba(0, 0, 0, 0.25)",opacity:.8,transform:"translateY(-4px) scale(1.05)",transition:"box-shadow 250ms ease, opacity 500ms ease, transform 150ms ease"}:{})}),Sc=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).state={isMounted:!1},n.getStyle=function(){var e,t=Zt()(1,"props.sequence.measureCount",Object(ac.a)(n));return{width:(e=t,4*e*8*2)}},n.handleClick=function(){n.props.isSelected||n.props.onSelect(n.props.sequence)},n.handleDoubleClick=function(){n.props.onOpen(n.props.sequence)},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({isMounted:!0})},16)}},{key:"render",value:function(){return k.a.createElement(mc,{isDragging:this.props.isDragging,isMounted:this.state.isMounted,isSelected:this.props.isSelected,style:this.getStyle(),onClick:this.handleClick,onDoubleClick:this.handleDoubleClick},this.props.sequence.notes.map(function(e){return k.a.createElement(gc,{key:e.id,note:e})}))}}]),t}(k.a.PureComponent);Sc.defaultProps={index:0};var Ec=jt.c.div.withConfig({displayName:"TrackHeader",componentId:"cnwslw-0"})(function(e){return{alignItems:"center",alignSelf:"flex-start",backgroundColor:e.theme.primary[0],color:e.theme.almostblack,display:"flex",fontWeight:800,height:28,marginBottom:e.theme.margin.s,paddingLeft:e.theme.margin.s,paddingRight:e.theme.margin.s,textTransform:"uppercase",transform:"scale(1)",transition:"transform 0.2s ease","&:hover:not(:active)":{transform:"scale(1.05)"},"&:active":{transform:"scale(0.9)"}}}),yc=$n.components,bc=yc.Boxes,Oc=yc.MatrixBox,Dc=jt.c.div.withConfig({displayName:"Track__StyledTrack",componentId:"q4k6ll-0"})(function(e){return{alignItems:"stretch",cursor:"pointer",display:"flex",flex:"0 0 auto",flexDirection:"column",marginBottom:e.theme.margin.m}}),vc=Object(jt.c)(Oc).attrs(function(e){return{fill:e.theme.primary[2]}})({left:0,position:"absolute",top:0}),Cc=jt.c.div.withConfig({displayName:"Track__TrackSequences",componentId:"q4k6ll-1"})({alignItems:"stretch",display:"flex",flex:"1 0 auto",height:84,position:"relative"}),Tc=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getBodySequencesStyle=function(){return{width:64*n.props.songMeasureCount}},n.getBoxesItems=function(){return Zt()([],"props.track.sequences",Object(ac.a)(n)).map(function(e){return{id:e.id,length:e.measureCount,x:e.position,sequence:e}})},n.getFirstEmptyPosition=function(){var e=Zt()([],"props.track.sequences",Object(ac.a)(n)),t=fi()(0,n.props.songMeasureCount);return Ir()(function(t){return!lc()(function(e){return function(t){return sc()(t.position,t.position+t.measureCount,e)}}(t),e)},t)},n.getIsSequenceSelected=function(e){var t=Zt()("","id",e),o=Zt()("","props.selectedSequence.id",Object(ac.a)(n));return!!o&&t===o},n.getMatrix=function(){var e=4*n.props.songMeasureCount+1;return Xi()(function(t){return Xi()(function(e){return 0!==e&&e%4!==0||0!==t&&3!==t&&6!==t?1:2},e)},7)},n.getSequenceComponent=function(e){var t=e.isDragging,o=e.item;return k.a.createElement(Sc,{isDragging:t,isSelected:n.getIsSequenceSelected(o.sequence),onOpen:n.props.onSequenceOpen,onSelect:n.props.onSequenceSelect,sequence:o.sequence})},n.handleBodySequencesSequenceOpen=function(e){n.props.onSequenceOpen(e)},n.handleBodySequencesSequenceSelect=function(e){n.props.onSequenceSelect(e)},n.handleBoxesItemsChange=function(e){var t=e.filter(function(e){return e.sequence.measureCount!==e.length||e.sequence.position!==e.x}).map(function(e){return Object(C.a)({},e.sequence,{measureCount:e.length,position:e.x})});ic()(n.props.onSequenceEdit,t)},n.handleHeaderClick=function(){n.props.onTrackSelect(n.props.track)},n.handleHeaderIsMutedToggle=function(){n.props.onTrackIsMutedToggle(n.props.track)},n.handleHeaderIsSoloingToggle=function(){n.props.onTrackIsSoloingToggle(n.props.track)},n.handleSequenceAdd=function(e){n.props.onSequenceAdd(n.props.track,e)},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){var e=this,t=this.getFirstEmptyPosition();return k.a.createElement(Dc,null,k.a.createElement(Ec,{onClick:this.handleHeaderClick},k.a.createElement(Pn.a,null,function(t){return t(e.props.track.voice)})),k.a.createElement(Cc,{style:this.getBodySequencesStyle()},k.a.createElement(vc,{matrix:this.getMatrix(),height:84,width:64*this.props.songMeasureCount}),k.a.createElement(bc,{boxContentComponent:this.getSequenceComponent,items:this.getBoxesItems(),length:this.props.songMeasureCount,onItemsChange:this.handleBoxesItemsChange,step:64,style:{height:84}}),Object(On.showIf)(!Ma()(t))(k.a.createElement(hc,{onClick:function(){return e.handleSequenceAdd(t)},style:{left:64*t}}))))}}]),t}(k.a.PureComponent),Ic=$n.components,_c=Ic.FadeIn,jc=Ic.FadeOut,Ac=Object(jt.c)(Sn.a.div)({alignItems:"center",bottom:0,color:"white",display:"flex",flex:"1 1 auto",justifyContent:"center",left:0,position:"absolute",right:0,top:0}),kc=jt.c.div.withConfig({displayName:"TrackList__StyledTrackList",componentId:"rf6brn-0"})({alignItems:"flex-start",display:"flex",flex:"1 1 auto",flexDirection:"column",overflow:"auto",position:"relative"}),wc=jt.c.div.withConfig({displayName:"TrackList__TrackListContent",componentId:"rf6brn-1"})(function(e){return{alignItems:"flex-start",display:"flex",flex:"1 0 auto",flexDirection:"column",minWidth:"100%",padding:e.theme.margin.m,paddingBottom:e.theme.margin.m+84,paddingRight:e.theme.margin.m+128,paddingTop:e.theme.margin.m+2,position:"relative"}}),Nc=jt.c.div.withConfig({displayName:"TrackList__TrackListUnderlay",componentId:"rf6brn-2"})({bottom:0,left:0,position:"absolute",right:0,top:0});function Rc(e){var t=Object(Sn.b)(e.tracks,function(e){return e.id},{config:{clamp:!0,tension:200},from:{marginLeft:-64,opacity:0},enter:{marginLeft:0,opacity:1},leave:{marginLeft:64,opacity:0}});return k.a.createElement(kc,null,k.a.createElement(jc,{component:Ac,isVisible:e.isLoading},"LOADING SONG..."),k.a.createElement(wc,null,k.a.createElement(Nc,{onClick:e.onSequenceDeselect}),k.a.createElement(_c,{isVisible:!e.isLoading},k.a.createElement(oc,{isStopped:e.isStopped,measureCount:e.songMeasureCount,measureWidth:64,onMeasureCountChange:e.onSongMeasureCountChange,onPositionSet:e.onPositionSet}),t.map(function(t){var n=t.item,o=t.key,a=t.props;return k.a.createElement(Sn.a.div,{key:o,style:Object(C.a)({},a,{height:a.opacity.interpolate({range:[0,.5,1],output:[0,136,136]})})},k.a.createElement(Tc,{onSequenceAdd:e.onSequenceAdd,onSequenceEdit:e.onSequenceEdit,onSequenceOpen:e.onSequenceOpen,onSequenceSelect:e.onSequenceSelect,onTrackIsMutedToggle:e.onTrackIsMutedToggle,onTrackIsSoloingToggle:e.onTrackIsSoloingToggle,onTrackSelect:e.onTrackStage,selectedSequence:e.selectedSequence,songMeasureCount:e.songMeasureCount,track:n}))}),k.a.createElement(Wi,{onClick:e.onTrackAdd,songMeasureCount:e.songMeasureCount}))))}var xc=n(227),Pc=n.n(xc),qc=n(225),Lc=n.n(qc),Uc=n(226),Mc=n.n(Uc),Bc=n(224),Gc=n.n(Bc),zc=n(171),Kc=n.n(zc),Qc=n(173),Vc=n.n(Qc),Wc=n(172),Hc=n.n(Wc),Yc=Object(jt.c)(Ut.a)(function(e){return{alignSelf:"stretch",marginLeft:e.theme.margin.s,marginRight:e.theme.margin.s}}),Fc=Object(jt.c)(Gc.a)(function(e){return{marginBottom:e.theme.margin.m,marginLeft:e.theme.margin.s}}),Xc=Object(jt.c)(Lc.a)(function(e){return{alignItems:"flex-start",display:"flex",flex:"1 1 auto",flexDirection:"column",marginLeft:-1*e.theme.margin.s,marginRight:-1*e.theme.margin.s}}),Jc=Object(jt.c)(Mc.a)({fontWeight:800,textTransform:"uppercase"}),Zc=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getIsOpen=function(){return!Do()(n.props.stagedTrack)},n.handleContentDeleteButtonClick=function(){n.props.onDelete(n.props.stagedTrack)},n.handleVoiceChange=function(e){return n.props.onVoiceSet(n.props.stagedTrack,e.target.value)},n.handleVolumeChange=function(e){return n.props.onVolumeSet(n.props.stagedTrack,e.target.value)},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){var e=this;return k.a.createElement(Pn.a,null,function(t){return k.a.createElement(Pc.a,{fullWidth:!0,maxWidth:"xs",onClose:e.props.onDismiss,open:e.getIsOpen()},k.a.createElement(Jc,null,t("Edit Track")),k.a.createElement(Xc,null,k.a.createElement(Fc,null,k.a.createElement(Kc.a,{htmlFor:"voice"},"Voice"),k.a.createElement(Hc.a,{inputProps:{name:"voice",id:"voice"},onChange:e.handleVoiceChange,value:Zt()("","props.stagedTrack.voice",e)},Object.keys(U.a.VOICES).map(function(e){return k.a.createElement(Vc.a,{key:e,value:e},t(e))}))),k.a.createElement(Fc,null,k.a.createElement(Kc.a,{htmlFor:"volume"},"Volume"),k.a.createElement(Hc.a,{inputProps:{name:"volume",id:"volume"},onChange:e.handleVolumeChange,value:Zt()(0,"props.stagedTrack.volume",e)},fi()(0,-21).map(function(e){return k.a.createElement(Vc.a,{key:e,value:e},e)}))),k.a.createElement(Yc,{color:"secondary",onClick:e.handleContentDeleteButtonClick,variant:"contained"},t("Delete"))))})}}]),t}(k.a.PureComponent),$c=$n.components,es=$c.IconButton,ts=$c.Toolbar,ns=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getIsAlternate=function(){return Ko()(Do.a)(n.props.selectedSequence)},n.openSequence=function(){n.props.onSequenceOpen(n.props.selectedSequence)},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(ts,{position:"top",isAlternate:this.getIsAlternate(),leftItems:k.a.createElement(k.a.Fragment,null,k.a.createElement(es,{icon:"undo",isDisabled:!this.props.isUndoEnabled,onClick:this.props.onUndo,title:"Undo"}),Object(On.showIf)(this.props.isRedoEnabled)(k.a.createElement(es,{icon:"redo",isDisabled:!this.props.isRedoEnabled,onClick:this.props.onRedo,title:"Redo"}))),leftItemsAlt:k.a.createElement(k.a.Fragment,null,k.a.createElement(es,{icon:"undo",isDisabled:!this.props.isUndoEnabled,onClick:this.props.onUndo,title:"Undo"}),Object(On.showIf)(this.props.isRedoEnabled)(k.a.createElement(es,{icon:"redo",isDisabled:!this.props.isRedoEnabled,onClick:this.props.onRedo,title:"Redo"}))),rightItemsAlt:k.a.createElement(k.a.Fragment,null,k.a.createElement(es,{icon:"pencil",onClick:this.openSequence}),k.a.createElement(es,{icon:"clone",onClick:this.props.onSequenceDuplicate}),k.a.createElement(es,{icon:"trash",onClick:this.props.onSequenceDelete}))})}}]),t}(k.a.PureComponent);ns.defaultProps={selectedSequence:{}};var os,as=$n.components.Timeline,rs=Object(jt.c)(er.HotKeys)({display:"flex",flex:"1 1 auto",flexDirection:"column",overflow:"hidden",position:"relative"}),is=function(e){function t(e){var n;return Object(vt.a)(this,t),(n=Object(Tt.a)(this,Object(It.a)(t).call(this,e))).state={selectedSequenceId:"",selectedTrackId:""},n.deleteSelectedSequence=function(e){e.preventDefault();var t=n.getSelectedSequence();Ma()(t)||n.props.onSequenceDelete(t)},n.deleteTrack=function(e){n.props.onTrackDelete(e),n.deselectTrack()},n.deselectTrack=function(){n.setState({selectedTrackId:""})},n.duplicateSelectedSequence=function(e){e.preventDefault();var t=n.getSelectedSequence();if(!Do()(t)){var o=U.a.createSequence(t.trackId,t.position,t.measureCount);n.props.onSequenceDuplicate(o,t),n.setState({selectedSequenceId:o.id})}},n.getKeyHandlers=function(){return{backspace:n.deleteSelectedSequence,del:n.deleteSelectedSequence,"ctrl+shift+d":n.duplicateSelectedSequence,"ctrl+z":n.undo,"ctrl+alt+z":n.redo,"meta+shift+d":n.duplicateSelectedSequence,"meta+z":n.undo,"meta+alt+z":n.redo}},n.getSelectedSequence=function(){return Ir()(function(e){return e.id===n.state.selectedSequenceId},n.props.sequences)||{}},n.getSelectedTrack=function(){return Ir()(function(e){return e.id===n.state.selectedTrackId},n.props.tracks)||{}},n.handleTrackListSequenceAdd=function(e,t){var o=U.a.createSequence(e.id,t);n.props.onSequenceAdd(o)},n.handleTrackListSequenceDeselect=function(){n.setState({selectedSequenceId:""})},n.handleTrackListSequenceSelect=function(e){n.setState({selectedSequenceId:e.id})},n.handleTrackListTrackAdd=function(){var e=U.a.createTrack(),t=U.a.createSequence(e.id);n.props.onTrackAdd(e,t)},n.handleTracksEditorToolbarSequenceDelete=function(){n.props.onSequenceDelete(n.getSelectedSequence())},n.handleTracksEditorToolbarSequenceOpen=function(){n.openSequence(n.getSelectedSequence())},n.openSequence=function(e){n.props.history.push("".concat(n.props.match.url,"/sequencer/").concat(e.id))},n.redo=function(){n.props.isRedoEnabled&&n.props.onRedo()},n.selectTrack=function(e){n.setState({selectedTrackId:e.id})},n.undo=function(){n.props.isUndoEnabled&&n.props.onUndo()},n.focusRef=k.a.createRef(),n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoad(this.props.match.params.songId),this.focusRef.current.focus()}},{key:"render",value:function(){return k.a.createElement(rs,{focused:!0,handlers:this.getKeyHandlers()},k.a.createElement("div",{ref:this.focusRef,tabIndex:-1}),k.a.createElement(k.a.Fragment,null,k.a.createElement(Rc,{isLoading:this.props.isLoading,isStopped:this.props.isStopped,onPositionSet:this.props.onPositionSet,onSequenceAdd:this.handleTrackListSequenceAdd,onSequenceDelete:this.props.onSequenceDelete,onSequenceEdit:this.props.onSequenceEdit,onSequenceDeselect:this.handleTrackListSequenceDeselect,onSequenceOpen:this.openSequence,onSequenceSelect:this.handleTrackListSequenceSelect,onSongMeasureCountChange:this.props.onSongMeasureCountChange,onTrackAdd:this.handleTrackListTrackAdd,onTrackIsMutedToggle:this.props.onTrackIsMutedToggle,onTrackIsSoloingToggle:this.props.onTrackIsSoloingToggle,onTrackStage:this.selectTrack,selectedSequence:this.getSelectedSequence(),songMeasureCount:this.props.songMeasureCount,tracks:this.props.tracks}),k.a.createElement(ns,{isRedoEnabled:this.props.isRedoEnabled,isUndoEnabled:this.props.isUndoEnabled,onRedo:this.redo,onSequenceDelete:this.deleteSelectedSequence,onSequenceDuplicate:this.duplicateSelectedSequence,onSequenceOpen:this.openSequence,onUndo:this.undo,selectedSequence:this.getSelectedSequence()}),k.a.createElement(as,{isVisible:!this.props.isStopped,offset:2*this.props.position+16}),k.a.createElement(Zc,{onDelete:this.deleteTrack,onDismiss:this.deselectTrack,onVoiceSet:this.props.onTrackVoiceSet,onVolumeSet:this.props.onTrackVolumeSet,stagedTrack:this.getSelectedTrack()})))}}]),t}(k.a.PureComponent),cs=Object(N.b)(function(e){return{isLoading:ka.selectors.getIsSongLoading(e),isRedoEnabled:ka.selectors.getIsRedoEnabled(e),isUndoEnabled:ka.selectors.getIsUndoEnabled(e),isStopped:Pa.selectors.getIsStopped(e),position:Pa.selectors.getPosition(e),songMeasureCount:ka.selectors.getMeasureCount(e),sequences:ka.selectors.getSequencesArray(e),song:ka.selectors.getSong(e),tracks:ka.selectors.getDeepTracks(e)}},{onLoad:$n.actions.songEditorLoaded,onPositionSet:$n.actions.positionSetRequestStarted,onRedo:$n.actions.redoRequested,onSequenceAdd:$n.actions.sequenceAdded,onSequenceDelete:$n.actions.sequenceDeleted,onSequenceDuplicate:$n.actions.sequenceDuplicated,onSequenceEdit:$n.actions.sequenceEdited,onSongMeasureCountChange:$n.actions.measureCountSet,onTrackAdd:$n.actions.trackAdded,onTrackDelete:$n.actions.trackDeleted,onTrackIsMutedToggle:$n.actions.trackIsMutedToggled,onTrackIsSoloingToggle:$n.actions.trackIsSoloingToggled,onTrackVoiceSet:$n.actions.trackVoiceSet,onTrackVolumeSet:$n.actions.trackVolumeSet,onUndo:$n.actions.undoRequested})(is),ss="tracksEditor",us={components:y,constants:b},ls=U.a.PLAYBACK_STATES,ps=ls.STARTED,ds=ls.STOPPED,fs=$n.components,hs=fs.IconButton,gs=fs.Toolbar,ms=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getIsAlternate=function(){return Ko()(Do.a)(n.props.selectedSequence)},n.getIsMoveLeftButtonDisabled=function(){return n.props.selectedSequence.position<1},n.getIsShortenButtonDisabled=function(){return n.props.selectedSequence.measureCount<2},n.openSequence=function(){n.props.onSequenceOpen(n.props.selectedSequence)},n.playPause=function(){"running"!==nr.a.context.state&&nr.a.context.resume(),n.props.playbackState===ps?n.props.onPause():n.props.onPlay()},n.stop=function(){n.props.onStop()},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(gs,{position:"top",isAlternate:this.getIsAlternate(),leftItems:k.a.createElement(k.a.Fragment,null,k.a.createElement(hs,{icon:"cog",onClick:this.props.onSongInfoOpen,title:"Settings"})),rightItems:k.a.createElement(k.a.Fragment,null,Object(On.hideIf)(this.props.playbackState===ps)(k.a.createElement(hs,{icon:"play",onClick:this.playPause,title:"Play"})),Object(On.showIf)(this.props.playbackState===ps)(k.a.createElement(hs,{icon:"pause",onClick:this.playPause,title:"Pause"})),Object(On.showIf)(this.props.playbackState!==ds)(k.a.createElement(hs,{icon:"stop",onClick:this.stop,title:"Stop"}))),style:{borderTop:0}})}}]),t}(k.a.PureComponent),Ss=n(311),Es=n.n(Ss),ys=$n.components.DownloadButton,bs=Ao()(function(e){return{id:e,text:String(e)}},U.a.BPM_RANGE),Os=Object(jt.c)(Gc.a)(function(e){return{marginBottom:e.theme.margin.m,marginLeft:e.theme.margin.s}}),Ds=Object(jt.c)(Lc.a)(function(e){return{alignItems:"flex-start",display:"flex",flex:"1 1 auto",flexDirection:"column",marginLeft:-1*e.theme.margin.s,marginRight:-1*e.theme.margin.s}}),vs=Object(jt.c)(Mc.a)({fontWeight:800,textTransform:"uppercase"}),Cs=Object(jt.c)(Es.a)(function(e){return{marginLeft:e.theme.margin.s,marginTop:e.theme.margin.m}}),Ts=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getStringifiedSong=function(){return JSON.stringify(n.props.song)},n.handleBPMSelectChange=function(e){n.props.onBPMChange(e.target.value)},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){var e=this;return k.a.createElement(Pn.a,null,function(t){return k.a.createElement(Pc.a,{fullWidth:!0,maxWidth:"xs",onClose:e.props.onConfirm,open:e.props.isOpen},k.a.createElement(vs,null,t("Song Info")),k.a.createElement(Ds,{className:"song-info-modal__content"},k.a.createElement(Os,null,k.a.createElement(Kc.a,{htmlFor:"bpm"},"BPM"),k.a.createElement(Hc.a,{inputProps:{name:"bpm",id:"bpm"},onChange:e.handleBPMSelectChange,value:e.props.bpm},bs.map(function(e){return k.a.createElement(Vc.a,{key:e.id,value:e.id},e.text)}))),k.a.createElement(Ut.a,{onClick:e.props.onReturnToDashboard},t("Return to Dashboard")),k.a.createElement(Ut.a,{onClick:e.props.onSignOut},t("Sign Out")),k.a.createElement(ys,{fileContents:e.getStringifiedSong(),filename:"song.json"},t("Download Song")),k.a.createElement(Cs,{variant:"subtitle1"},t("Select Language")),k.a.createElement(Ut.a,{onClick:function(){return $n.i18n.changeLanguage("en")}},t("English")),k.a.createElement(Ut.a,{onClick:function(){return $n.i18n.changeLanguage("jp")}},t("Japanese"))))})}}]),t}(k.a.PureComponent),Is=zi.components.SequenceEditorContainer,_s=us.components.TracksEditorContainer,js=Object(jt.c)(er.HotKeys)({display:"flex",flex:"1 1 auto",flexDirection:"column",overflow:"hidden",position:"relative"}),As=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).state={isSongInfoModalOpen:!1},n.closeSongInfo=function(){n.setState({isSongInfoModalOpen:!1})},n.openSongInfo=function(){n.setState({isSongInfoModalOpen:!0})},n.returnToDashboard=function(){n.props.history.push("/")},n.signOut=function(){n.props.history.push("/sign-out")},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"componentDidUpdate",value:function(e){e.song.name!==this.props.song.name&&(window.document.title="".concat(this.props.song.name," - Aria"))}},{key:"render",value:function(){return k.a.createElement(js,{focused:!0,handlers:{}},k.a.createElement(x.b,{component:_s,exact:!0,path:this.props.match.path}),k.a.createElement(x.b,{component:Is,exact:!0,path:"".concat(this.props.match.path,"/sequencer/:sequenceId")}),k.a.createElement(ms,{onPause:this.props.onPause,onPlay:this.props.onPlay,onSongInfoOpen:this.openSongInfo,onStop:this.props.onStop,playbackState:this.props.playbackState}),k.a.createElement(Ts,{bpm:this.props.bpm,isOpen:this.state.isSongInfoModalOpen,onBPMChange:this.props.onBPMChange,onConfirm:this.closeSongInfo,onReturnToDashboard:this.returnToDashboard,onSignOut:this.signOut,song:this.props.song}))}}]),t}(k.a.PureComponent),ks=Object(N.b)(function(e){return{bpm:ka.selectors.getBPM(e),playbackState:Pa.selectors.getPlaybackState(e),song:ka.selectors.getSong(e)}},{onBPMChange:$n.actions.bpmSet,onPause:$n.actions.playbackPauseRequestStarted,onPlay:$n.actions.playbackStartRequestStarted,onStop:$n.actions.playbackStopRequestStarted})(As),ws="songEditor",Ns={components:O,constants:D},Rs=$n.constants.authProvider,xs=jt.c.div.withConfig({displayName:"SignIn__StyledSignIn",componentId:"sc-3uw7mw-0"})({alignItems:"center",display:"flex",flex:"1 1 auto",justifyContent:"center"}),Ps=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getRedirectFrom=function(){return Zt()({pathname:"/"},"props.location.state.from",Object(ac.a)(n))},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"componentDidMount",value:function(){window.document.title="Sign In - Aria"}},{key:"render",value:function(){return this.props.isAuthenticated?k.a.createElement(x.a,{to:this.getRedirectFrom()}):k.a.createElement(Pn.a,null,function(e){return k.a.createElement(xs,null,k.a.createElement(Ut.a,{onClick:function(){return _n.auth().signInWithRedirect(Rs)},variant:"contained"},e("Sign in with Google")))})}}]),t}(k.a.Component),qs=Object(N.b)(function(e){return{isAuthenticated:$a.selectors.getIsAuthenticated(e)}})(Ps),Ls=jt.c.div.withConfig({displayName:"SignOut__StyledSignOut",componentId:"jyhy2f-0"})({alignItems:"center",color:"white",display:"flex",flex:"1 1 auto",justifyContent:"center",textTransform:"uppercase"}),Us=function(e){function t(){return Object(vt.a)(this,t),Object(Tt.a)(this,Object(It.a)(t).apply(this,arguments))}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"componentDidMount",value:function(){window.document.title="Sign Out - Aria",setTimeout(function(){_n.auth().signOut()},1e3)}},{key:"render",value:function(){return this.props.isAuthenticated?k.a.createElement(Pn.a,null,function(e){return k.a.createElement(Ls,null,e("Signing Out"))}):k.a.createElement(x.a,{to:{pathname:"/sign-in"}})}}]),t}(k.a.Component),Ms=Object(N.b)(function(e){return{isAuthenticated:$a.selectors.getIsAuthenticated(e)}})(Us),Bs=$n.styles,Gs=Cr.components.DashboardContainer,zs=$n.components.Shell,Ks=U.a.PLAYBACK_STATES.STARTED,Qs=Ns.components.SongEditorContainer,Vs=function(e){var t=e.component,n=e.isAuthenticated,o=Object(qt.a)(e,["component","isAuthenticated"]);return k.a.createElement(x.b,Object.assign({},o,{render:function(e){return n?k.a.createElement(t,e):k.a.createElement(x.a,{to:{pathname:"/sign-in",state:{from:e.location}}})}}))},Ws=jt.c.div.withConfig({displayName:"App__LoadingIndicator",componentId:"xq66un-0"})({alignItems:"center",color:"white",display:"flex",flex:"1 1 auto",justifyContent:"center"}),Hs=function(e){function t(){var e,n;Object(vt.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(Tt.a)(this,(e=Object(It.a)(t)).call.apply(e,[this].concat(a)))).getKeyHandlers=function(){return{enter:n.playPause,esc:n.stop}},n.playPause=function(){"running"!==nr.a.context.state&&nr.a.context.resume(),n.props.playbackState===Ks?n.props.onPause():n.props.onPlay()},n.stop=function(){n.props.onStop()},n}return Object(_t.a)(t,e),Object(Ct.a)(t,[{key:"render",value:function(){return k.a.createElement(j.MuiThemeProvider,{theme:Bs.themes.mui},k.a.createElement(jt.b,{theme:Bs.themes.emerald},k.a.createElement(er.HotKeys,{focused:!0,handlers:this.getKeyHandlers(),onDragEnter:this.handleDragEnter,onDragOver:this.handleDragOver,onDrop:this.handleDrop},k.a.createElement(zs,null,Object(On.hideIf)(this.props.didAuthenticationRun)(k.a.createElement(Ws,null,"AUTHENTICATING...")),Object(On.showIf)(this.props.didAuthenticationRun)(k.a.createElement(k.a.Fragment,null,k.a.createElement(x.b,{component:qs,exact:!0,path:"/sign-in"}),k.a.createElement(x.b,{component:Ms,exact:!0,path:"/sign-out"}),k.a.createElement(Vs,{component:Gs,exact:!0,isAuthenticated:this.props.isAuthenticated,path:"/"}),k.a.createElement(Vs,{component:Qs,exact:!1,isAuthenticated:this.props.isAuthenticated,path:"/song/:songId"})))))))}}]),t}(k.a.PureComponent),Ys=Object(x.e)(Object(N.b)(function(e){return{isAuthenticated:$a.selectors.getIsAuthenticated(e),didAuthenticationRun:$a.selectors.getDidAuthenticationRun(e),playbackState:Pa.selectors.getPlaybackState(e)}},{onPause:$n.actions.playbackPauseRequestStarted,onPlay:$n.actions.playbackStartRequestStarted,onStop:$n.actions.playbackStopRequestStarted})(Hs)),Fs={components:v},Xs=n(471),Js=n(1058),Zs=[].concat(Object(nn.a)(Pa.logic),Object(nn.a)(ka.logic),Object(nn.a)($a.logic)),$s=Object(ra.combineReducers)((os={},Object(sa.a)(os,Pa.constants.NAME,Pa.reducer),Object(sa.a)(os,ka.constants.NAME,ka.reducer),Object(sa.a)(os,$a.constants.NAME,$a.reducer),os)),eu=Object(Js.a)(Zs),tu=Object(ra.applyMiddleware)(eu),nu=Object(Xs.composeWithDevTools)({actionsBlacklist:[$n.actions.POSITION_REQUEST_SUCCEEDED]}),ou=Object(ra.createStore)($s,nu(tu)),au=(n(1050),document.createComment("insertion-point-jss"));document.head.insertBefore(au,document.head.firstChild);var ru=Object(j.createGenerateClassName)(),iu=Object(T.create)(Object(C.a)({},Object(j.jssPreset)(),{insertionPoint:"insertion-point-jss"})),cu=Fs.components.AppContainer;ou.dispatch($n.actions.initialized()),Object(w.render)(k.a.createElement(_.a,{jss:iu,generateClassName:ru},k.a.createElement(R.a,null,k.a.createElement(N.a,{store:ou},k.a.createElement(cu,null)))),document.querySelector("#root"))},473:function(e,t,n){e.exports=n(1051)}},[[473,1,2]]]);
//# sourceMappingURL=main.b8fed585.chunk.js.map